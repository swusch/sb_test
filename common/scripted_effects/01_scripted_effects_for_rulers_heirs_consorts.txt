#All are Country Scope unless otherwise stated.

#Consorts
create_new_internal_consort_effect = { #Don't use if you want more options with different random consorts.
	if = {
		limit = {
			has_dlc = "Rights of Man"
			has_consort = no
		}
		define_consort = {
			country_of_origin = ROOT
		}
	}
}

divorce_consort_effect = {

	#Foreign consort family expresses anger
	#if = {
	#	limit = {
	#		religion = catholic
	#		NOT = { exists = PAP }
	#		has_foreign_consort = yes
	#	}
	#
	#	random_country = {
	#		limit = { has_given_consort_to = ROOT } 
	#
	#		hidden_effect = { country_event = { id = consort_events.205 days = 1 } } 
	#
	#		tooltip = {
	#			add_opinion = {
	#				who = ROOT
	#				modifier = offended_by_divorce	
	#			}
	#
	#			add_casus_belli = {
	#				target = ROOT
	#				type = cb_insult
	#				months = 60
	#			}
	#		}
	#	}
	#}

	#Local consort family expresses anger
	if = {
		limit = {
			#OR = {
			#	NOT = { religion = catholic }
			#	AND = {
			#		religion = catholic
			#		NOT = { exists = PAP }
			#	}
			#}
			has_foreign_consort = no
			any_owned_province = {
				has_province_modifier = domain_of_spouses_family
			}
		}

		every_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family } 
			add_or_extend_province_modifier_effect = {
				MODIFIER = angered_nobles
				DURATION = 7300
			}
		}
	}

	#Set aside first wife and select another
	#if = {
		#limit = { NOT = { religion_group = christian } }

		custom_tooltip = divorce.b.tt

		hidden_effect = {	
			if = {
				limit = { NOT = { any_country = { has_given_consort_to = ROOT } } }
				remove_consort = yes
				country_event = { id = consort_events.206 }
			}
		}
	
		define_consort = { }
	#}

	#Divorce
	#if = {
	#	limit = {
	#		OR = {
	#			AND = {
	#				religion_group = christian
	#				NOT = { religion = catholic }
	#			}
	#			AND = {
	#				religion = catholic
	#				NOT = { exists = PAP }
	#			}
	#		}
	#	}
	#
	#	custom_tooltip = divorce.b.tt
	#	
	#	hidden_effect = {	
	#		if = {
	#			limit = { NOT = { any_country = { has_given_consort_to = ROOT } } }
	#			remove_consort = yes
	#			country_event = { id = consort_events.206 }
	#		}
	#	}
	#}

	#Papal dispensation
	#if = {
	#	limit = {
	#		religion = catholic 
	#		exists = PAP
	#	}
	#
	#	#How much influence will you spend?
	#	country_event = { id = consort_events.201 }
	#}

	#Prestige hit
	#if = {
		#limit = {
		#	OR = {
		#		NOT = { religion = catholic }
		#		AND = {
		#			NOT = { exists = PAP }
		#			religion = catholic
		#		}
		#	}
		#}
		add_prestige = -15
	#}
	if = {
		limit = { has_country_flag = frida_vrorensson }
		country_event = {
			id = flavor_frozenmaw.14
		}
	}
}

remove_consort_effect = { #copied from on_queen_death
	remove_consort = yes
	if = {
		limit = { has_consort_flag = 10_years_anniversary }
		set_ruler_flag = had_10_years_anniversary
	}
	if = {
		limit = { has_consort_flag = 20_years_anniversary }
		set_ruler_flag = had_20_years_anniversary
	}
	if = {
		limit = { has_consort_flag = consort_has_affection_of_ruler }
		set_ruler_flag = consort_had_affection_of_ruler
	}

	if = {
		limit = {
			has_regency = no
			NOT = { has_ruler_flag = widow_widower }
		}
		set_ruler_flag = widow_widower
	}
	if = {
		limit = { has_consort_regency = no }
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = { has_ruler_flag = accepted_help_from_spouses_family }
		clr_ruler_flag = accepted_help_from_spouses_family
	}
	if = {
		limit = { has_ruler_flag = helped_spouses_family }
		clr_ruler_flag = helped_spouses_family
	}
	if = {
		limit = { has_ruler_flag = refused_to_help_spouses_family }
		clr_ruler_flag = refused_to_help_spouses_family
	}
	if = {
		limit = { has_ruler_flag = has_lowborn_consort }
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = { has_ruler_flag = has_lowborn_consort }
		clr_ruler_flag = has_lowborn_consort
	}
	if = {
		limit = { has_country_modifier = consort_adm_advice }
		remove_country_modifier = consort_adm_advice
	}
	if = {
		limit = { has_country_modifier = consort_dip_advice }
		remove_country_modifier = consort_dip_advice
	}
	if = {
		limit = { has_country_modifier = consort_mil_advice }
		remove_country_modifier = consort_mil_advice
	}
	if = {
		limit = { has_country_modifier = without_spouse_advice }
		remove_country_modifier = without_spouse_advice
	}
	if = {
		limit = { has_ruler_modifier = affectionate_royal_couple }
		remove_country_modifier = affectionate_royal_couple
	}
	if = {
		limit = { has_ruler_modifier = bav_woman_scorned_mod }
		remove_country_modifier = bav_woman_scorned_mod
	}
	if = {
		limit = { has_ruler_modifier = bav_building_wife_church }
		remove_country_modifier = bav_building_wife_church
	}

	clr_ruler_flag = marriage_length

	magic_on_consort_death = yes
}

save_origin_of_consort_effect = { #Used for all internal consorts.
	if = { # finds and saves foreign country as origin
		limit = {
			has_foreign_consort = yes
			any_country = { has_given_consort_to = ROOT }
		}
		random_country = {
			limit = { has_given_consort_to = ROOT }
			save_event_target_as = origin_of_consort
		}
	}
	if = { # finds and saves local province as origin
		limit = {
			has_foreign_consort = no
			any_owned_province = { has_province_modifier = domain_of_spouses_family }
		}
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			save_event_target_as = origin_of_consort
		}
	}
	if = { # finds and saves local province as origin
		limit = {
			has_foreign_consort = no
			has_ruler_flag = has_lowborn_consort
			any_owned_province = { has_province_modifier = home_of_consort }
		}
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			save_event_target_as = origin_of_consort
		}
	}
	if = { # if all else fails: use this consort_flag to set a triggered desc
		limit = {
			NOT = { has_saved_event_target = origin_of_consort }
		}
		set_consort_flag = home_province_lost
	}
}

#Heirs
increase_heir_adm_effect = {
	if = {
		limit = { has_heir = yes }
		if = {
			limit = { NOT = { heir_adm = 6 } }
			change_heir_adm = 1
			else = { add_adm_power = 50 }
		}
	}
	else = { add_adm_power = 50 }
}
increase_heir_dip_effect = {
	if = {
		limit = { has_heir = yes }
		if = {
			limit = { NOT = { heir_dip = 6 } }
			change_heir_dip = 1
			else = { add_dip_power = 50 }
		}
	}
	else = { add_dip_power = 50 }
}
increase_heir_mil_effect = {
	if = {
		limit = { has_heir = yes }
		if = {
			limit = { NOT = { heir_mil = 6 } }
			change_heir_mil = 1
			else = { add_mil_power = 50 }
		}
	}
	else = { add_mil_power = 50 }
}

#Rulers
change_ruler_stat = {
    tooltip = {
        change_$type$ = $amount$
    }
    custom_tooltip = ADD_STAT_OR_POWER_$type$
    hidden_effect = {
		set_variable = {
			which = ForLoopCounter
			value = $amount$
		}
		while = {
			limit = {
				check_variable = {
					which = ForLoopCounter
					value = 1
				}
			}
			if = {
				limit = {
					NOT = { $type$ = 6 }
				}
				change_$type$ = 1
			}
			else = {
				add_$type$_power = 100
			}
			subtract_variable = {
				which = ForLoopCounter
				value = 1
			}
		}
    }
}

#Heir
change_heir_stat = {
    tooltip = {
        change_heir_$type$ = $amount$
    }
    custom_tooltip = ADD_STAT_OR_POWER_$type$
    hidden_effect = {
		set_variable = {
			which = ForLoopCounter
			value = $amount$
		}
		while = {
			limit = {
				check_variable = {
					which = ForLoopCounter
					value = 1
				}
			}
			if = {
				limit = {
					NOT = { heir_$type$ = 6 }
				}
				change_heir_$type$ = 1
			}
			else = {
				add_$type$_power = 100
			}
			subtract_variable = {
				which = ForLoopCounter
				value = 1
			}
		}
    }
}

#Anbennar - added this
decrease_heir_adm_effect = {
	if = {
		limit = { heir_adm = 1 }
		change_heir_adm = -1
	}
	else = {
		add_adm_power = -50
	}
}
decrease_heir_dip_effect = {
	if = {
		limit = { heir_dip = 1 }
		change_heir_dip = -1
	}
	else = {
		add_dip_power = -50
	}
}
decrease_heir_mil_effect = {
	if = {
		limit = { heir_mil = 1 }
		change_heir_mil = -1
	}
	else = {
		add_mil_power = -50
	}
}

#Rulers

#Anbennar - added this
increase_ruler_adm_effect = {
	if = {
		limit = { NOT = { adm = 6 } }
		change_adm = 1
	}
	else = {
		add_adm_power = 50
	}
}
increase_ruler_dip_effect = {
	if = {
		limit = { NOT = { dip = 6 } }
		change_dip = 1
	}
	else = {
		add_dip_power = 50
	}
}
increase_ruler_mil_effect = {
	if = {
		limit = { NOT = { mil = 6 } }
		change_mil = 1
	}
	else = {
		add_mil_power = 50
	}
}
increase_random_ruler_skill = {
	if = {
		limit = { adm = 6 dip = 6 mil = 6 }
		random_list = {
			1 = { add_adm_power = 50 }
			1 = { add_dip_power = 50 }
			1 = { add_mil_power = 50 }
		}
	}
	else = {
		random_list = {
			1 = { trigger = { NOT = { adm = 6 } } change_adm = 1 }
			1 = { trigger = { NOT = { dip = 6 } } change_dip = 1 }
			1 = { trigger = { NOT = { mil = 6 } } change_mil = 1 }
		}
	}
}

decrease_ruler_adm_effect = {
	if = {
		limit = { adm = 1 }
		change_adm = -1
	}
	else = {
		add_adm_power = -50
	}
}
decrease_ruler_dip_effect = {
	if = {
		limit = { dip = 1 }
		change_dip = -1
	}
	else = {
		add_dip_power = -50
	}
}
decrease_ruler_mil_effect = {
	if = {
		limit = { mil = 1 }
		change_mil = -1
	}
	else = {
		add_mil_power = -50
	}
}
decrease_random_ruler_skill = {
	if = {
		limit = { NOT = { adm = 1 dip = 1 mil = 1 } }
		random_list = {
			1 = { add_adm_power = -50 }
			1 = { add_dip_power = -50 }
			1 = { add_mil_power = -50 }
		}
	}
	else = {
		random_list = {
			1 = { trigger = { adm = 1 } change_adm = -1 }
			1 = { trigger = { dip = 1 } change_dip = -1 }
			1 = { trigger = { mil = 1 } change_mil = -1 }
		}
	}
}

clear_character_personalities = { #ruler, heir, queen
	custom_tooltip = clear_$character$_personalities_tt
	hidden_effect = {
		remove_$character$_personality = just_personality
		remove_$character$_personality = righteous_personality
		remove_$character$_personality = tolerant_personality
		remove_$character$_personality = kind_hearted_personality
		remove_$character$_personality = free_thinker_personality
		remove_$character$_personality = well_connected_personality
		remove_$character$_personality = calm_personality
		remove_$character$_personality = careful_personality
		remove_$character$_personality = secretive_personality
		remove_$character$_personality = intricate_web_weaver_personality
		remove_$character$_personality = fertile_personality
		remove_$character$_personality = well_advised_personality
		remove_$character$_personality = benevolent_personality
		remove_$character$_personality = zealot_personality
		remove_$character$_personality = pious_personality
		remove_$character$_personality = lawgiver_personality
		remove_$character$_personality = midas_touched_personality
		remove_$character$_personality = incorruptible_personality
		remove_$character$_personality = architectural_visionary_personality
		remove_$character$_personality = scholar_personality
		remove_$character$_personality = entrepreneur_personality
		remove_$character$_personality = industrious_personality
		remove_$character$_personality = expansionist_personality
		remove_$character$_personality = charismatic_negotiator_personality
		remove_$character$_personality = silver_tongue_personality
		remove_$character$_personality = conqueror_personality
		remove_$character$_personality = tactical_genius_personality
		remove_$character$_personality = bold_fighter_personality
		remove_$character$_personality = strict_personality
		remove_$character$_personality = inspiring_leader_personality
		remove_$character$_personality = martial_educator_personality
		remove_$character$_personality = navigator_personality
		remove_$character$_personality = fierce_negotiator_personality
		remove_$character$_personality = babbling_buffoon_personality
		remove_$character$_personality = embezzler_personality
		remove_$character$_personality = infertile_personality
		remove_$character$_personality = drunkard_personality
		remove_$character$_personality = sinner_personality
		remove_$character$_personality = greedy_personality
		remove_$character$_personality = reformist_personality
		remove_$character$_personality = cruel_personality
		remove_$character$_personality = naive_personality
		remove_$character$_personality = craven_personality
		remove_$character$_personality = loose_lips_personality
		remove_$character$_personality = obsessive_perfectionist_personality
		remove_$character$_personality = malevolent_personality
		remove_$character$_personality = immortal_personality
		remove_$character$_personality = mage_personality
		remove_$character$_personality = humane_personality
		remove_$character$_personality = petty_personality
		remove_$character$_personality = patron_of_arts_personality
		remove_$character$_personality = legendary_pirate_personality
		remove_$character$_personality = great_conqueror_personality
		remove_$character$_personality = mythical_conqueror_personality
		remove_$character$_personality = xhazobs_chosen_personality
		remove_$character$_personality = shapeshifter_personality
		remove_$character$_personality = fire_planetouched_personality
		remove_$character$_personality = water_planetouched_personality
		remove_$character$_personality = earth_planetouched_personality
		remove_$character$_personality = wind_planetouched_personality
		remove_$character$_personality = shadow_planetouched_personality
		remove_$character$_personality = life_planetouched_personality
	}
}

clear_ruler_personalities = { clear_character_personalities = { character = ruler } }
clear_heir_personalities = { clear_character_personalities = { character = heir } }
clear_consort_personalities = { clear_character_personalities = { character = queen } }

clear_ancestor_character_personalities = {
	trigger_switch = {
		on_trigger = $character1$_has_personality

		ancestor_just_personality = { remove_$character2$_personality = ancestor_just_personality }
		ancestor_righteous_personality = { remove_$character2$_personality = ancestor_righteous_personality }
		ancestor_tolerant_personality = { remove_$character2$_personality = ancestor_tolerant_personality }
		ancestor_kind_hearted_personality = { remove_$character2$_personality = ancestor_kind_hearted_personality }
		ancestor_free_thinker_personality = { remove_$character2$_personality = ancestor_free_thinker_personality }
		ancestor_well_connected_personality = { remove_$character2$_personality = ancestor_well_connected_personality }
		ancestor_calm_personality = { remove_$character2$_personality = ancestor_calm_personality }
		ancestor_careful_personality = { remove_$character2$_personality = ancestor_careful_personality }
		ancestor_secretive_personality = { remove_$character2$_personality = ancestor_secretive_personality }
		ancestor_intricate_web_weaver_personality = { remove_$character2$_personality = ancestor_intricate_web_weaver_personality }
		ancestor_benevolent_personality = { remove_$character2$_personality = ancestor_benevolent_personality }
		ancestor_zealot_personality = { remove_$character2$_personality = ancestor_zealot_personality }
		ancestor_pious_personality = { remove_$character2$_personality = ancestor_pious_personality }
		ancestor_lawgiver_personality = { remove_$character2$_personality = ancestor_lawgiver_personality }
		ancestor_midas_touched_personality = { remove_$character2$_personality = ancestor_midas_touched_personality }
		ancestor_incorruptible_personality = { remove_$character2$_personality = ancestor_incorruptible_personality }
		ancestor_architectural_visionary_personality = { remove_$character2$_personality = ancestor_architectural_visionary_personality }
		ancestor_scholar_personality = { remove_$character2$_personality = ancestor_scholar_personality }
		ancestor_entrepreneur_personality = { remove_$character2$_personality = ancestor_entrepreneur_personality }
		ancestor_industrious_personality = { remove_$character2$_personality = ancestor_industrious_personality }
		ancestor_expansionist_personality = { remove_$character2$_personality = ancestor_expansionist_personality }
		ancestor_charismatic_negotiator_personality = { remove_$character2$_personality = ancestor_charismatic_negotiator_personality }
		ancestor_silver_tongue_personality = { remove_$character2$_personality = ancestor_silver_tongue_personality }
		ancestor_conqueror_personality = { remove_$character2$_personality = ancestor_conqueror_personality }
		ancestor_tactical_genius_personality = { remove_$character2$_personality = ancestor_tactical_genius_personality }
		ancestor_bold_fighter_personality = { remove_$character2$_personality = ancestor_bold_fighter_personality }
		ancestor_strict_personality = { remove_$character2$_personality = ancestor_strict_personality }
		ancestor_inspiring_leader_personality = { remove_$character2$_personality = ancestor_inspiring_leader_personality }
		ancestor_martial_educator_personality = { remove_$character2$_personality = ancestor_martial_educator_personality }
		ancestor_navigator_personality = { remove_$character2$_personality = ancestor_navigator_personality }
		ancestor_fierce_negotiator_personality = { remove_$character2$_personality = ancestor_fierce_negotiator_personality }
		ancestor_reformist_personality = { remove_$character2$_personality = ancestor_reformist_personality }
		ancestor_mage_personality = { remove_$character2$_personality = ancestor_mage_personality }
		ancestor_humane_personality = { remove_$character2$_personality = ancestor_humane_personality }
		ancestor_patron_of_arts_personality = { remove_$character2$_personality = ancestor_patron_of_arts_personality }
		ancestor_legendary_pirate_personality = { remove_$character2$_personality = ancestor_legendary_pirate_personality }
		ancestor_great_conqueror_personality = { remove_$character2$_personality = ancestor_great_conqueror_personality }
		ancestor_mythical_conqueror_personality = { remove_$character2$_personality = ancestor_mythical_conqueror_personality }
		ancestor_xhazobs_chosen_personality = { remove_$character2$_personality = ancestor_xhazobs_chosen_personality }
		ancestor_shapeshifter_personality = { remove_$character2$_personality = ancestor_shapeshifter_personality }
		ancestor_fire_planetouched_personality = { remove_$character2$_personality = ancestor_fire_planetouched_personality }
		ancestor_water_planetouched_personality = { remove_$character2$_personality = ancestor_water_planetouched_personality }
		ancestor_earth_planetouched_personality = { remove_$character2$_personality = ancestor_earth_planetouched_personality }
		ancestor_wind_planetouched_personality = { remove_$character2$_personality = ancestor_wind_planetouched_personality }
		ancestor_shadow_planetouched_personality = { remove_$character2$_personality = ancestor_shadow_planetouched_personality }
		ancestor_life_planetouched_personality = { remove_$character2$_personality = ancestor_life_planetouched_personality }
	}
}

clear_ancestor_vanilla_character_personalities = { #same as above, with all the cool ones gone
	trigger_switch = {
		on_trigger = $character1$_has_personality

		ancestor_just_personality = { remove_$character2$_personality = ancestor_just_personality }
		ancestor_righteous_personality = { remove_$character2$_personality = ancestor_righteous_personality }
		ancestor_tolerant_personality = { remove_$character2$_personality = ancestor_tolerant_personality }
		ancestor_kind_hearted_personality = { remove_$character2$_personality = ancestor_kind_hearted_personality }
		ancestor_free_thinker_personality = { remove_$character2$_personality = ancestor_free_thinker_personality }
		ancestor_well_connected_personality = { remove_$character2$_personality = ancestor_well_connected_personality }
		ancestor_calm_personality = { remove_$character2$_personality = ancestor_calm_personality }
		ancestor_careful_personality = { remove_$character2$_personality = ancestor_careful_personality }
		ancestor_secretive_personality = { remove_$character2$_personality = ancestor_secretive_personality }
		ancestor_intricate_web_weaver_personality = { remove_$character2$_personality = ancestor_intricate_web_weaver_personality }
		ancestor_benevolent_personality = { remove_$character2$_personality = ancestor_benevolent_personality }
		ancestor_zealot_personality = { remove_$character2$_personality = ancestor_zealot_personality }
		ancestor_pious_personality = { remove_$character2$_personality = ancestor_pious_personality }
		ancestor_lawgiver_personality = { remove_$character2$_personality = ancestor_lawgiver_personality }
		ancestor_midas_touched_personality = { remove_$character2$_personality = ancestor_midas_touched_personality }
		ancestor_incorruptible_personality = { remove_$character2$_personality = ancestor_incorruptible_personality }
		ancestor_architectural_visionary_personality = { remove_$character2$_personality = ancestor_architectural_visionary_personality }
		ancestor_scholar_personality = { remove_$character2$_personality = ancestor_scholar_personality }
		ancestor_entrepreneur_personality = { remove_$character2$_personality = ancestor_entrepreneur_personality }
		ancestor_industrious_personality = { remove_$character2$_personality = ancestor_industrious_personality }
		ancestor_expansionist_personality = { remove_$character2$_personality = ancestor_expansionist_personality }
		ancestor_charismatic_negotiator_personality = { remove_$character2$_personality = ancestor_charismatic_negotiator_personality }
		ancestor_silver_tongue_personality = { remove_$character2$_personality = ancestor_silver_tongue_personality }
		ancestor_conqueror_personality = { remove_$character2$_personality = ancestor_conqueror_personality }
		ancestor_tactical_genius_personality = { remove_$character2$_personality = ancestor_tactical_genius_personality }
		ancestor_bold_fighter_personality = { remove_$character2$_personality = ancestor_bold_fighter_personality }
		ancestor_strict_personality = { remove_$character2$_personality = ancestor_strict_personality }
		ancestor_inspiring_leader_personality = { remove_$character2$_personality = ancestor_inspiring_leader_personality }
		ancestor_martial_educator_personality = { remove_$character2$_personality = ancestor_martial_educator_personality }
		ancestor_navigator_personality = { remove_$character2$_personality = ancestor_navigator_personality }
		ancestor_fierce_negotiator_personality = { remove_$character2$_personality = ancestor_fierce_negotiator_personality }
		ancestor_reformist_personality = { remove_$character2$_personality = ancestor_reformist_personality }
		ancestor_humane_personality = { remove_$character2$_personality = ancestor_humane_personality }
		ancestor_patron_of_arts_personality = { remove_$character2$_personality = ancestor_patron_of_arts_personality }
		ancestor_legendary_pirate_personality = { remove_$character2$_personality = ancestor_legendary_pirate_personality }
	}
}

clear_ancestor_ruler_personalities = { clear_ancestor_character_personalities = { character1 = ruler character2 = ruler } }
clear_ancestor_vanilla_ruler_personalities = { clear_ancestor_vanilla_character_personalities = { character1 = ruler character2 = ruler } }
clear_ancestor_heir_personalities = { clear_ancestor_character_personalities = { character1 = heir character2 = heir } }
clear_ancestor_vanilla_heir_personalities = { clear_ancestor_vanilla_character_personalities = { character1 = heir character2 = heir } }
clear_ancestor_consort_personalities = { clear_ancestor_character_personalities = { character1 = consort character2 = queen } }
clear_ancestor_vanilla_consort_personalities = { clear_ancestor_vanilla_character_personalities = { character1 = consort character2 = queen } }

remove_worst_character_personality = {
	trigger_switch = {
		on_trigger = $character1$_has_personality

		# Bad Personalities
		babbling_buffoon_personality = { remove_$character2$_personality = babbling_buffoon_personality }
		embezzler_personality = { remove_$character2$_personality = embezzler_personality }
		infertile_personality = { remove_$character2$_personality = infertile_personality }
		drunkard_personality = { remove_$character2$_personality = drunkard_personality }
		sinner_personality = { remove_$character2$_personality = sinner_personality }
		greedy_personality = { remove_$character2$_personality = greedy_personality }
		reformist_personality = { remove_$character2$_personality = reformist_personality }
		cruel_personality = { remove_$character2$_personality = cruel_personality }
		naive_personality = { remove_$character2$_personality = naive_personality }
		craven_personality = { remove_$character2$_personality = craven_personality }
		loose_lips_personality = { remove_$character2$_personality = loose_lips_personality }
		obsessive_perfectionist_personality = { remove_$character2$_personality = obsessive_perfectionist_personality }
		malevolent_personality = { remove_$character2$_personality = malevolent_personality }
		petty_personality = { remove_$character2$_personality = petty_personality }

		# Good Vanilla Personalities
		just_personality = { remove_$character2$_personality = just_personality }
		righteous_personality = { remove_$character2$_personality = righteous_personality }
		tolerant_personality = { remove_$character2$_personality = tolerant_personality }
		kind_hearted_personality = { remove_$character2$_personality = kind_hearted_personality }
		free_thinker_personality = { remove_$character2$_personality = free_thinker_personality }
		well_connected_personality = { remove_$character2$_personality = well_connected_personality }
		calm_personality = { remove_$character2$_personality = calm_personality }
		careful_personality = { remove_$character2$_personality = careful_personality }
		secretive_personality = { remove_$character2$_personality = secretive_personality }
		intricate_web_weaver_personality = { remove_$character2$_personality = intricate_web_weaver_personality }
		fertile_personality = { remove_$character2$_personality = fertile_personality }
		well_advised_personality = { remove_$character2$_personality = well_advised_personality }
		benevolent_personality = { remove_$character2$_personality = benevolent_personality }
		zealot_personality = { remove_$character2$_personality = zealot_personality }
		pious_personality = { remove_$character2$_personality = pious_personality }
		lawgiver_personality = { remove_$character2$_personality = lawgiver_personality }
		midas_touched_personality = { remove_$character2$_personality = midas_touched_personality }
		incorruptible_personality = { remove_$character2$_personality = incorruptible_personality }
		architectural_visionary_personality = { remove_$character2$_personality = architectural_visionary_personality }
		scholar_personality = { remove_$character2$_personality = scholar_personality }
		entrepreneur_personality = { remove_$character2$_personality = entrepreneur_personality }
		industrious_personality = { remove_$character2$_personality = industrious_personality }
		expansionist_personality = { remove_$character2$_personality = expansionist_personality }
		charismatic_negotiator_personality = { remove_$character2$_personality = charismatic_negotiator_personality }
		silver_tongue_personality = { remove_$character2$_personality = silver_tongue_personality }
		conqueror_personality = { remove_$character2$_personality = conqueror_personality }
		tactical_genius_personality = { remove_$character2$_personality = tactical_genius_personality }
		bold_fighter_personality = { remove_$character2$_personality = bold_fighter_personality }
		strict_personality = { remove_$character2$_personality = strict_personality }
		inspiring_leader_personality = { remove_$character2$_personality = inspiring_leader_personality }
		martial_educator_personality = { remove_$character2$_personality = martial_educator_personality }
		navigator_personality = { remove_$character2$_personality = navigator_personality }
		fierce_negotiator_personality = { remove_$character2$_personality = fierce_negotiator_personality }
		immortal_personality = { remove_$character2$_personality = immortal_personality }
		humane_personality = { remove_$character2$_personality = humane_personality }
		patron_of_arts_personality = { remove_$character2$_personality = patron_of_arts_personality }
		legendary_pirate_personality = { remove_$character2$_personality = legendary_pirate_personality }

		# Anbennar Personalities - last resort
		mage_personality = { remove_$character2$_personality = mage_personality }
		great_conqueror_personality = { remove_$character2$_personality = great_conqueror_personality }
		mythical_conqueror_personality = { remove_$character2$_personality = mythical_conqueror_personality }
		xhazobs_chosen_personality = { remove_$character2$_personality = xhazobs_chosen_personality }
		shapeshifter_personality = { remove_$character2$_personality = shapeshifter_personality }
		fire_planetouched_personality = { remove_$character2$_personality = fire_planetouched_personality }
		water_planetouched_personality = { remove_$character2$_personality = water_planetouched_personality }
		earth_planetouched_personality = { remove_$character2$_personality = earth_planetouched_personality }
		wind_planetouched_personality = { remove_$character2$_personality = wind_planetouched_personality }
		shadow_planetouched_personality = { remove_$character2$_personality = shadow_planetouched_personality }
		life_planetouched_personality = { remove_$character2$_personality = life_planetouched_personality }
	}
}

remove_worst_ruler_personality = { remove_worst_character_personality = { character1 = ruler character2 = ruler } }
remove_worst_heir_personality = { remove_worst_character_personality = { character1 = heir character2 = heir } }
remove_worst_consort_personality = { remove_worst_character_personality = { character1 = consort character2 = queen } }

save_character_personalities = { #ruler, heir, consort
	clear_saved_character_personalities = { character = $character$ }
	if = { limit = { $character$_has_personality = just_personality } set_$character$_flag = just_personality_flag }
	if = { limit = { $character$_has_personality = righteous_personality } set_$character$_flag = righteous_personality_flag }
	if = { limit = { $character$_has_personality = tolerant_personality } set_$character$_flag = tolerant_personality_flag }
	if = { limit = { $character$_has_personality = kind_hearted_personality } set_$character$_flag = kind_hearted_personality_flag }
	if = { limit = { $character$_has_personality = free_thinker_personality } set_$character$_flag = free_thinker_personality_flag }
	if = { limit = { $character$_has_personality = well_connected_personality } set_$character$_flag = well_connected_personality_flag }
	if = { limit = { $character$_has_personality = calm_personality } set_$character$_flag = calm_personality_flag }
	if = { limit = { $character$_has_personality = careful_personality } set_$character$_flag = careful_personality_flag }
	if = { limit = { $character$_has_personality = secretive_personality } set_$character$_flag = secretive_personality_flag }
	if = { limit = { $character$_has_personality = intricate_web_weaver_personality } set_$character$_flag = intricate_web_weaver_personality_flag }
	if = { limit = { $character$_has_personality = fertile_personality } set_$character$_flag = fertile_personality_flag }
	if = { limit = { $character$_has_personality = well_advised_personality } set_$character$_flag = well_advised_personality_flag }
	if = { limit = { $character$_has_personality = benevolent_personality } set_$character$_flag = benevolent_personality_flag }
	if = { limit = { $character$_has_personality = zealot_personality } set_$character$_flag = zealot_personality_flag }
	if = { limit = { $character$_has_personality = pious_personality } set_$character$_flag = pious_personality_flag }
	if = { limit = { $character$_has_personality = lawgiver_personality } set_$character$_flag = lawgiver_personality_flag }
	if = { limit = { $character$_has_personality = midas_touched_personality } set_$character$_flag = midas_touched_personality_flag }
	if = { limit = { $character$_has_personality = incorruptible_personality } set_$character$_flag = incorruptible_personality_flag }
	if = { limit = { $character$_has_personality = architectural_visionary_personality } set_$character$_flag = architectural_visionary_personality_flag }
	if = { limit = { $character$_has_personality = scholar_personality } set_$character$_flag = scholar_personality_flag }
	if = { limit = { $character$_has_personality = entrepreneur_personality } set_$character$_flag = entrepreneur_personality_flag }
	if = { limit = { $character$_has_personality = industrious_personality } set_$character$_flag = industrious_personality_flag }
	if = { limit = { $character$_has_personality = expansionist_personality } set_$character$_flag = expansionist_personality_flag }
	if = { limit = { $character$_has_personality = charismatic_negotiator_personality } set_$character$_flag = charismatic_negotiator_personality_flag }
	if = { limit = { $character$_has_personality = conqueror_personality } set_$character$_flag = conqueror_personality_flag }
	if = { limit = { $character$_has_personality = silver_tongue_personality } set_$character$_flag = silver_tongue_personality_flag }
	if = { limit = { $character$_has_personality = tactical_genius_personality } set_$character$_flag = tactical_genius_personality_flag }
	if = { limit = { $character$_has_personality = bold_fighter_personality } set_$character$_flag = bold_fighter_personality_flag }
	if = { limit = { $character$_has_personality = strict_personality } set_$character$_flag = strict_personality_flag }
	if = { limit = { $character$_has_personality = inspiring_leader_personality } set_$character$_flag = inspiring_leader_personality_flag }
	if = { limit = { $character$_has_personality = martial_educator_personality } set_$character$_flag = martial_educator_personality_flag }
	if = { limit = { $character$_has_personality = navigator_personality } set_$character$_flag = navigator_personality_flag }
	if = { limit = { $character$_has_personality = fierce_negotiator_personality } set_$character$_flag = fierce_negotiator_personality_flag }
	if = { limit = { $character$_has_personality = babbling_buffoon_personality } set_$character$_flag = babbling_buffoon_personality_flag }
	if = { limit = { $character$_has_personality = embezzler_personality } set_$character$_flag = embezzler_personality_flag }
	if = { limit = { $character$_has_personality = infertile_personality } set_$character$_flag = infertile_personality_flag }
	if = { limit = { $character$_has_personality = drunkard_personality } set_$character$_flag = drunkard_personality_flag }
	if = { limit = { $character$_has_personality = sinner_personality } set_$character$_flag = sinner_personality_flag }
	if = { limit = { $character$_has_personality = greedy_personality } set_$character$_flag = greedy_personality_flag }
	if = { limit = { $character$_has_personality = cruel_personality } set_$character$_flag = cruel_personality_flag }
	if = { limit = { $character$_has_personality = craven_personality } set_$character$_flag = craven_personality_flag }
	if = { limit = { $character$_has_personality = naive_personality } set_$character$_flag = naive_personality_flag }
	if = { limit = { $character$_has_personality = loose_lips_personality } set_$character$_flag = loose_lips_personality_flag }
	if = { limit = { $character$_has_personality = obsessive_perfectionist_personality } set_$character$_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { $character$_has_personality = malevolent_personality } set_$character$_flag = malevolent_personality_flag }
	if = { limit = { $character$_has_personality = legendary_pirate_personality } set_$character$_flag = legendary_pirate_personality_flag }
	if = { limit = { $character$_has_personality = humane_personality } set_$character$_flag = humane_personality_flag }
	if = { limit = { $character$_has_personality = petty_personality } set_$character$_flag = petty_personality_flag }
	if = { limit = { $character$_has_personality = reformist_personality } set_$character$_flag = reformist_personality_flag }
	if = { limit = { $character$_has_personality = patron_of_arts_personality } set_$character$_flag = patron_of_arts_personality_flag }
	if = { limit = { $character$_has_personality = mage_personality } set_$character$_flag = mage_personality_flag }
	if = { limit = { $character$_has_personality = great_conqueror_personality } set_$character$_flag = great_conqueror_personality_flag }
	if = { limit = { $character$_has_personality = mythical_conqueror_personality } set_$character$_flag = mythical_conqueror_personality_flag }
	if = { limit = { $character$_has_personality = xhazobs_chosen_personality } set_$character$_flag = xhazobs_chosen_personality_flag }
	if = { limit = { $character$_has_personality = shapeshifter_personality } set_$character$_flag = shapeshifter_personality_flag }
	if = { limit = { $character$_has_personality = fire_planetouched_personality } set_$character$_flag = fire_planetouched_personality_flag }
	if = { limit = { $character$_has_personality = water_planetouched_personality } set_$character$_flag = water_planetouched_personality_flag }
	if = { limit = { $character$_has_personality = earth_planetouched_personality } set_$character$_flag = earth_planetouched_personality_flag }
	if = { limit = { $character$_has_personality = wind_planetouched_personality } set_$character$_flag = wind_planetouched_personality_flag }
	if = { limit = { $character$_has_personality = shadow_planetouched_personality } set_$character$_flag = shadow_planetouched_personality_flag }
	if = { limit = { $character$_has_personality = life_planetouched_personality } set_$character$_flag = life_planetouched_personality_flag }
}

save_ruler_personalities = { save_character_personalities = { character = ruler } }
save_heir_personalities = { save_character_personalities = { character = heir } }
save_consort_personalities = { save_character_personalities = { character = consort } }

clear_saved_character_personalities = { #ruler, heir, consort
	clr_$character$_flag = just_personality_flag
	clr_$character$_flag = righteous_personality_flag
	clr_$character$_flag = tolerant_personality_flag
	clr_$character$_flag = kind_hearted_personality_flag
	clr_$character$_flag = free_thinker_personality_flag
	clr_$character$_flag = well_connected_personality_flag
	clr_$character$_flag = calm_personality_flag
	clr_$character$_flag = careful_personality_flag
	clr_$character$_flag = secretive_personality_flag
	clr_$character$_flag = intricate_web_weaver_personality_flag
	clr_$character$_flag = fertile_personality_flag
	clr_$character$_flag = well_advised_personality_flag
	clr_$character$_flag = benevolent_personality_flag
	clr_$character$_flag = zealot_personality_flag
	clr_$character$_flag = pious_personality_flag
	clr_$character$_flag = lawgiver_personality_flag
	clr_$character$_flag = midas_touched_personality_flag
	clr_$character$_flag = incorruptible_personality_flag
	clr_$character$_flag = architectural_visionary_personality_flag
	clr_$character$_flag = scholar_personality_flag
	clr_$character$_flag = entrepreneur_personality_flag
	clr_$character$_flag = industrious_personality_flag
	clr_$character$_flag = expansionist_personality_flag
	clr_$character$_flag = charismatic_negotiator_personality_flag
	clr_$character$_flag = conqueror_personality_flag
	clr_$character$_flag = silver_tongue_personality_flag
	clr_$character$_flag = tactical_genius_personality_flag
	clr_$character$_flag = bold_fighter_personality_flag
	clr_$character$_flag = strict_personality_flag
	clr_$character$_flag = inspiring_leader_personality_flag
	clr_$character$_flag = martial_educator_personality_flag
	clr_$character$_flag = navigator_personality_flag
	clr_$character$_flag = fierce_negotiator_personality_flag
	clr_$character$_flag = babbling_buffoon_personality_flag
	clr_$character$_flag = embezzler_personality_flag
	clr_$character$_flag = infertile_personality_flag
	clr_$character$_flag = drunkard_personality_flag
	clr_$character$_flag = sinner_personality_flag
	clr_$character$_flag = greedy_personality_flag
	clr_$character$_flag = cruel_personality_flag
	clr_$character$_flag = craven_personality_flag
	clr_$character$_flag = naive_personality_flag
	clr_$character$_flag = loose_lips_personality_flag
	clr_$character$_flag = obsessive_perfectionist_personality_flag
	clr_$character$_flag = malevolent_personality_flag
	clr_$character$_flag = legendary_pirate_personality_flag
	clr_$character$_flag = humane_personality_flag
	clr_$character$_flag = petty_personality_flag
	clr_$character$_flag = reformist_personality_flag
	clr_$character$_flag = patron_of_arts_personality_flag
	clr_$character$_flag = mage_personality_flag
	clr_$character$_flag = great_conqueror_personality_flag
	clr_$character$_flag = mythical_conqueror_personality_flag
	clr_$character$_flag = xhazobs_chosen_personality_flag
	clr_$character$_flag = shapeshifter_personality_flag
	clr_$character$_flag = fire_planetouched_personality_flag
	clr_$character$_flag = water_planetouched_personality_flag
	clr_$character$_flag = earth_planetouched_personality_flag
	clr_$character$_flag = wind_planetouched_personality_flag
	clr_$character$_flag = shadow_planetouched_personality_flag
	clr_$character$_flag = life_planetouched_personality_flag
}

clear_saved_ruler_personalities = { clear_saved_character_personalities = { character = ruler } }
clear_saved_heir_personalities = { clear_saved_character_personalities = { character = heir } }
clear_saved_consort_personalities = { clear_saved_character_personalities = { character = consort } }

apply_saved_character_personalities = { #ruler and heir, consort hacked in sorta
	if = { limit = { has_$character1$_flag = great_conqueror_personality_flag } add_$character2$_personality = great_conqueror_personality clr_$character1$_flag = great_conqueror_personality_flag }
	if = { limit = { has_$character1$_flag = mythical_conqueror_personality_flag } add_$character2$_personality = mythical_conqueror_personality clr_$character1$_flag = mythical_conqueror_personality_flag }
	if = { limit = { has_$character1$_flag = xhazobs_chosen_personality_flag } add_$character2$_personality = xhazobs_chosen_personality clr_$character1$_flag = xhazobs_chosen_personality_flag }
	if = { limit = { has_$character1$_flag = legendary_pirate_personality_flag } add_$character2$_personality = legendary_pirate_personality clr_$character1$_flag = legendary_pirate_personality_flag }
	if = { limit = { has_$character1$_flag = shapeshifter_personality_flag } add_$character2$_personality = shapeshifter_personality clr_$character1$_flag = shapeshifter_personality_flag }
	if = { limit = { has_$character1$_flag = fire_planetouched_personality_flag } add_$character2$_personality = fire_planetouched_personality clr_$character1$_flag = fire_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = water_planetouched_personality_flag } add_$character2$_personality = water_planetouched_personality clr_$character1$_flag = water_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = earth_planetouched_personality_flag } add_$character2$_personality = earth_planetouched_personality clr_$character1$_flag = earth_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = wind_planetouched_personality_flag } add_$character2$_personality = wind_planetouched_personality clr_$character1$_flag = wind_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = shadow_planetouched_personality_flag } add_$character2$_personality = shadow_planetouched_personality clr_$character1$_flag = shadow_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = life_planetouched_personality_flag } add_$character2$_personality = life_planetouched_personality clr_$character1$_flag = life_planetouched_personality_flag }
	if = { limit = { has_$character1$_flag = legendary_pirate_personality_flag } add_$character2$_personality = legendary_pirate_personality clr_$character1$_flag = legendary_pirate_personality_flag }
	if = { limit = { has_$character1$_flag = mage_personality_flag } add_$character2$_personality = mage_personality clr_$character1$_flag = mage_personality_flag }
	if = { limit = { has_$character1$_flag = just_personality_flag } add_$character2$_personality = just_personality clr_$character1$_flag = just_personality_flag }
	if = { limit = { has_$character1$_flag = righteous_personality_flag } add_$character2$_personality = righteous_personality clr_$character1$_flag = righteous_personality_flag }
	if = { limit = { has_$character1$_flag = tolerant_personality_flag } add_$character2$_personality = tolerant_personality clr_$character1$_flag = tolerant_personality_flag }
	if = { limit = { has_$character1$_flag = kind_hearted_personality_flag } add_$character2$_personality = kind_hearted_personality clr_$character1$_flag = kind_hearted_personality_flag }
	if = { limit = { has_$character1$_flag = free_thinker_personality_flag } add_$character2$_personality = free_thinker_personality clr_$character1$_flag = free_thinker_personality_flag }
	if = { limit = { has_$character1$_flag = well_connected_personality_flag } add_$character2$_personality = well_connected_personality clr_$character1$_flag = well_connected_personality_flag }
	if = { limit = { has_$character1$_flag = calm_personality_flag } add_$character2$_personality = calm_personality clr_$character1$_flag = calm_personality_flag }
	if = { limit = { has_$character1$_flag = careful_personality_flag } add_$character2$_personality = careful_personality clr_$character1$_flag = careful_personality_flag }
	if = { limit = { has_$character1$_flag = secretive_personality_flag } add_$character2$_personality = secretive_personality clr_$character1$_flag = secretive_personality_flag }
	if = { limit = { has_$character1$_flag = intricate_web_weaver_personality_flag } add_$character2$_personality = intricate_web_weaver_personality clr_$character1$_flag = intricate_web_weaver_personality_flag }
	if = { limit = { has_$character1$_flag = fertile_personality_flag } add_$character2$_personality = fertile_personality clr_$character1$_flag = fertile_personality_flag }
	if = { limit = { has_$character1$_flag = well_advised_personality_flag } add_$character2$_personality = well_advised_personality clr_$character1$_flag = well_advised_personality_flag }
	if = { limit = { has_$character1$_flag = benevolent_personality_flag } add_$character2$_personality = benevolent_personality clr_$character1$_flag = benevolent_personality_flag }
	if = { limit = { has_$character1$_flag = zealot_personality_flag } add_$character2$_personality = zealot_personality clr_$character1$_flag = zealot_personality_flag }
	if = { limit = { has_$character1$_flag = pious_personality_flag } add_$character2$_personality = pious_personality clr_$character1$_flag = pious_personality_flag }
	if = { limit = { has_$character1$_flag = lawgiver_personality_flag } add_$character2$_personality = lawgiver_personality clr_$character1$_flag = lawgiver_personality_flag }
	if = { limit = { has_$character1$_flag = midas_touched_personality_flag } add_$character2$_personality = midas_touched_personality clr_$character1$_flag = midas_touched_personality_flag }
	if = { limit = { has_$character1$_flag = incorruptible_personality_flag } add_$character2$_personality = incorruptible_personality clr_$character1$_flag = incorruptible_personality_flag }
	if = { limit = { has_$character1$_flag = architectural_visionary_personality_flag } add_$character2$_personality = architectural_visionary_personality clr_$character1$_flag = architectural_visionary_personality_flag }
	if = { limit = { has_$character1$_flag = scholar_personality_flag } add_$character2$_personality = scholar_personality clr_$character1$_flag = scholar_personality_flag }
	if = { limit = { has_$character1$_flag = entrepreneur_personality_flag } add_$character2$_personality = entrepreneur_personality clr_$character1$_flag = entrepreneur_personality_flag }
	if = { limit = { has_$character1$_flag = industrious_personality_flag } add_$character2$_personality = industrious_personality clr_$character1$_flag = industrious_personality_flag }
	if = { limit = { has_$character1$_flag = expansionist_personality_flag } add_$character2$_personality = expansionist_personality clr_$character1$_flag = expansionist_personality_flag }
	if = { limit = { has_$character1$_flag = charismatic_negotiator_personality_flag } add_$character2$_personality = charismatic_negotiator_personality clr_$character1$_flag = charismatic_negotiator_personality_flag }
	if = { limit = { has_$character1$_flag = silver_tongue_personality_flag } add_$character2$_personality = silver_tongue_personality clr_$character1$_flag = silver_tongue_personality_flag }
	if = { limit = { has_$character1$_flag = conqueror_personality_flag } add_$character2$_personality = conqueror_personality clr_$character1$_flag = conqueror_personality_flag }
	if = { limit = { has_$character1$_flag = tactical_genius_personality_flag } add_$character2$_personality = tactical_genius_personality clr_$character1$_flag = tactical_genius_personality_flag }
	if = { limit = { has_$character1$_flag = bold_fighter_personality_flag } add_$character2$_personality = bold_fighter_personality clr_$character1$_flag = bold_fighter_personality_flag }
	if = { limit = { has_$character1$_flag = strict_personality_flag } add_$character2$_personality = strict_personality clr_$character1$_flag = strict_personality_flag }
	if = { limit = { has_$character1$_flag = inspiring_leader_personality_flag } add_$character2$_personality = inspiring_leader_personality clr_$character1$_flag = inspiring_leader_personality_flag }
	if = { limit = { has_$character1$_flag = martial_educator_personality_flag } add_$character2$_personality = martial_educator_personality clr_$character1$_flag = martial_educator_personality_flag }
	if = { limit = { has_$character1$_flag = navigator_personality_flag } add_$character2$_personality = navigator_personality clr_$character1$_flag = navigator_personality_flag }
	if = { limit = { has_$character1$_flag = fierce_negotiator_personality_flag } add_$character2$_personality = fierce_negotiator_personality clr_$character1$_flag = fierce_negotiator_personality_flag }
	if = { limit = { has_$character1$_flag = babbling_buffoon_personality_flag } add_$character2$_personality = babbling_buffoon_personality clr_$character1$_flag = babbling_buffoon_personality_flag }
	if = { limit = { has_$character1$_flag = embezzler_personality_flag } add_$character2$_personality = embezzler_personality clr_$character1$_flag = embezzler_personality_flag }
	if = { limit = { has_$character1$_flag = infertile_personality_flag } add_$character2$_personality = infertile_personality clr_$character1$_flag = infertile_personality_flag }
	if = { limit = { has_$character1$_flag = drunkard_personality_flag } add_$character2$_personality = drunkard_personality clr_$character1$_flag = drunkard_personality_flag }
	if = { limit = { has_$character1$_flag = sinner_personality_flag } add_$character2$_personality = sinner_personality clr_$character1$_flag = sinner_personality_flag }
	if = { limit = { has_$character1$_flag = greedy_personality_flag } add_$character2$_personality = greedy_personality clr_$character1$_flag = greedy_personality_flag }
	if = { limit = { has_$character1$_flag = reformist_personality_flag } add_$character2$_personality = reformist_personality clr_$character1$_flag = reformist_personality_flag }
	if = { limit = { has_$character1$_flag = cruel_personality_flag } add_$character2$_personality = cruel_personality clr_$character1$_flag = cruel_personality_flag }
	if = { limit = { has_$character1$_flag = naive_personality_flag } add_$character2$_personality = naive_personality clr_$character1$_flag = naive_personality_flag }
	if = { limit = { has_$character1$_flag = craven_personality_flag } add_$character2$_personality = craven_personality clr_$character1$_flag = craven_personality_flag }
	if = { limit = { has_$character1$_flag = loose_lips_personality_flag } add_$character2$_personality = loose_lips_personality clr_$character1$_flag = loose_lips_personality_flag }
	if = { limit = { has_$character1$_flag = obsessive_perfectionist_personality_flag } add_$character2$_personality = obsessive_perfectionist_personality clr_$character1$_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { has_$character1$_flag = malevolent_personality_flag } add_$character2$_personality = malevolent_personality clr_$character1$_flag = malevolent_personality_flag }
	if = { limit = { has_$character1$_flag = humane_personality_flag } add_$character2$_personality = humane_personality clr_$character1$_flag = humane_personality_flag }
	if = { limit = { has_$character1$_flag = petty_personality_flag } add_$character2$_personality = petty_personality clr_$character1$_flag = petty_personality_flag }
}

apply_saved_ruler_personalities = { apply_saved_character_personalities = { character1 = ruler character2 = ruler } }
apply_saved_heir_personalities = { apply_saved_character_personalities = { character1 = heir character2 = heir } }
apply_saved_consort_personalities = { apply_saved_character_personalities = { character1 = consort character2 = queen } }

save_persistent_ruler_personalities = {
	clear_saved_persistent_ruler_personalities = yes
	if = { limit = { ruler_has_personality = just_personality } set_country_flag = just_personality_flag }
	if = { limit = { ruler_has_personality = righteous_personality } set_country_flag = righteous_personality_flag }
	if = { limit = { ruler_has_personality = tolerant_personality } set_country_flag = tolerant_personality_flag }
	if = { limit = { ruler_has_personality = kind_hearted_personality } set_country_flag = kind_hearted_personality_flag }
	if = { limit = { ruler_has_personality = free_thinker_personality } set_country_flag = free_thinker_personality_flag }
	if = { limit = { ruler_has_personality = well_connected_personality } set_country_flag = well_connected_personality_flag }
	if = { limit = { ruler_has_personality = calm_personality } set_country_flag = calm_personality_flag }
	if = { limit = { ruler_has_personality = careful_personality } set_country_flag = careful_personality_flag }
	if = { limit = { ruler_has_personality = secretive_personality } set_country_flag = secretive_personality_flag }
	if = { limit = { ruler_has_personality = intricate_web_weaver_personality } set_country_flag = intricate_web_weaver_personality_flag }
	if = { limit = { ruler_has_personality = fertile_personality } set_country_flag = fertile_personality_flag }
	if = { limit = { ruler_has_personality = well_advised_personality } set_country_flag = well_advised_personality_flag }
	if = { limit = { ruler_has_personality = benevolent_personality } set_country_flag = benevolent_personality_flag }
	if = { limit = { ruler_has_personality = zealot_personality } set_country_flag = zealot_personality_flag }
	if = { limit = { ruler_has_personality = pious_personality } set_country_flag = pious_personality_flag }
	if = { limit = { ruler_has_personality = lawgiver_personality } set_country_flag = lawgiver_personality_flag }
	if = { limit = { ruler_has_personality = midas_touched_personality } set_country_flag = midas_touched_personality_flag }
	if = { limit = { ruler_has_personality = incorruptible_personality } set_country_flag = incorruptible_personality_flag }
	if = { limit = { ruler_has_personality = architectural_visionary_personality } set_country_flag = architectural_visionary_personality_flag }
	if = { limit = { ruler_has_personality = scholar_personality } set_country_flag = scholar_personality_flag }
	if = { limit = { ruler_has_personality = entrepreneur_personality } set_country_flag = entrepreneur_personality_flag }
	if = { limit = { ruler_has_personality = industrious_personality } set_country_flag = industrious_personality_flag }
	if = { limit = { ruler_has_personality = expansionist_personality } set_country_flag = expansionist_personality_flag }
	if = { limit = { ruler_has_personality = charismatic_negotiator_personality } set_country_flag = charismatic_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = conqueror_personality } set_country_flag = conqueror_personality_flag }
	if = { limit = { ruler_has_personality = silver_tongue_personality } set_country_flag = silver_tongue_personality_flag }
	if = { limit = { ruler_has_personality = tactical_genius_personality } set_country_flag = tactical_genius_personality_flag }
	if = { limit = { ruler_has_personality = bold_fighter_personality } set_country_flag = bold_fighter_personality_flag }
	if = { limit = { ruler_has_personality = strict_personality } set_country_flag = strict_personality_flag }
	if = { limit = { ruler_has_personality = inspiring_leader_personality } set_country_flag = inspiring_leader_personality_flag }
	if = { limit = { ruler_has_personality = martial_educator_personality } set_country_flag = martial_educator_personality_flag }
	if = { limit = { ruler_has_personality = navigator_personality } set_country_flag = navigator_personality_flag }
	if = { limit = { ruler_has_personality = fierce_negotiator_personality } set_country_flag = fierce_negotiator_personality_flag }
	if = { limit = { ruler_has_personality = babbling_buffoon_personality } set_country_flag = babbling_buffoon_personality_flag }
	if = { limit = { ruler_has_personality = embezzler_personality } set_country_flag = embezzler_personality_flag }
	if = { limit = { ruler_has_personality = infertile_personality } set_country_flag = infertile_personality_flag }
	if = { limit = { ruler_has_personality = drunkard_personality } set_country_flag = drunkard_personality_flag }
	if = { limit = { ruler_has_personality = sinner_personality } set_country_flag = sinner_personality_flag }
	if = { limit = { ruler_has_personality = greedy_personality } set_country_flag = greedy_personality_flag }
	if = { limit = { ruler_has_personality = cruel_personality } set_country_flag = cruel_personality_flag }
	if = { limit = { ruler_has_personality = craven_personality } set_country_flag = craven_personality_flag }
	if = { limit = { ruler_has_personality = naive_personality } set_country_flag = naive_personality_flag }
	if = { limit = { ruler_has_personality = loose_lips_personality } set_country_flag = loose_lips_personality_flag }
	if = { limit = { ruler_has_personality = obsessive_perfectionist_personality } set_country_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { ruler_has_personality = malevolent_personality } set_country_flag = malevolent_personality_flag }
	if = { limit = { ruler_has_personality = legendary_pirate_personality } set_country_flag = legendary_pirate_personality_flag }
	if = { limit = { ruler_has_personality = humane_personality } set_country_flag = humane_personality_flag }
	if = { limit = { ruler_has_personality = petty_personality } set_country_flag = petty_personality_flag }
	if = { limit = { ruler_has_personality = reformist_personality } set_country_flag = reformist_personality_flag }
	if = { limit = { ruler_has_personality = patron_of_arts_personality } set_country_flag = patron_of_arts_personality_flag }
	if = { limit = { ruler_has_personality = mage_personality } set_country_flag = mage_personality_flag }
	if = { limit = { ruler_has_personality = great_conqueror_personality } set_country_flag = great_conqueror_personality_flag }
	if = { limit = { ruler_has_personality = mythical_conqueror_personality } set_country_flag = mythical_conqueror_personality_flag }
	if = { limit = { ruler_has_personality = xhazobs_chosen_personality } set_country_flag = xhazobs_chosen_personality_flag }
	if = { limit = { ruler_has_personality = shapeshifter_personality } set_country_flag = shapeshifter_personality_flag }
	if = { limit = { ruler_has_personality = fire_planetouched_personality } set_country_flag = fire_planetouched_personality_flag }
	if = { limit = { ruler_has_personality = water_planetouched_personality } set_country_flag = water_planetouched_personality_flag }
	if = { limit = { ruler_has_personality = earth_planetouched_personality } set_country_flag = earth_planetouched_personality_flag }
	if = { limit = { ruler_has_personality = wind_planetouched_personality } set_country_flag = wind_planetouched_personality_flag }
	if = { limit = { ruler_has_personality = shadow_planetouched_personality } set_country_flag = shadow_planetouched_personality_flag }
	if = { limit = { ruler_has_personality = life_planetouched_personality } set_country_flag = life_planetouched_personality_flag }
}

clear_saved_persistent_ruler_personalities = {
	clr_country_flag = just_personality_flag
	clr_country_flag = righteous_personality_flag
	clr_country_flag = tolerant_personality_flag
	clr_country_flag = kind_hearted_personality_flag
	clr_country_flag = free_thinker_personality_flag
	clr_country_flag = well_connected_personality_flag
	clr_country_flag = calm_personality_flag
	clr_country_flag = careful_personality_flag
	clr_country_flag = secretive_personality_flag
	clr_country_flag = intricate_web_weaver_personality_flag
	clr_country_flag = fertile_personality_flag
	clr_country_flag = well_advised_personality_flag
	clr_country_flag = benevolent_personality_flag
	clr_country_flag = zealot_personality_flag
	clr_country_flag = pious_personality_flag
	clr_country_flag = lawgiver_personality_flag
	clr_country_flag = midas_touched_personality_flag
	clr_country_flag = incorruptible_personality_flag
	clr_country_flag = architectural_visionary_personality_flag
	clr_country_flag = scholar_personality_flag
	clr_country_flag = entrepreneur_personality_flag
	clr_country_flag = industrious_personality_flag
	clr_country_flag = expansionist_personality_flag
	clr_country_flag = charismatic_negotiator_personality_flag
	clr_country_flag = conqueror_personality_flag
	clr_country_flag = silver_tongue_personality_flag
	clr_country_flag = tactical_genius_personality_flag
	clr_country_flag = bold_fighter_personality_flag
	clr_country_flag = strict_personality_flag
	clr_country_flag = inspiring_leader_personality_flag
	clr_country_flag = martial_educator_personality_flag
	clr_country_flag = navigator_personality_flag
	clr_country_flag = fierce_negotiator_personality_flag
	clr_country_flag = babbling_buffoon_personality_flag
	clr_country_flag = embezzler_personality_flag
	clr_country_flag = infertile_personality_flag
	clr_country_flag = drunkard_personality_flag
	clr_country_flag = sinner_personality_flag
	clr_country_flag = greedy_personality_flag
	clr_country_flag = cruel_personality_flag
	clr_country_flag = craven_personality_flag
	clr_country_flag = naive_personality_flag
	clr_country_flag = loose_lips_personality_flag
	clr_country_flag = obsessive_perfectionist_personality_flag
	clr_country_flag = malevolent_personality_flag
	clr_country_flag = legendary_pirate_personality_flag
	clr_country_flag = humane_personality_flag
	clr_country_flag = petty_personality_flag
	clr_country_flag = reformist_personality_flag
	clr_country_flag = patron_of_arts_personality_flag
	clr_country_flag = mage_personality_flag
	clr_country_flag = great_conqueror_personality_flag
	clr_country_flag = mythical_conqueror_personality_flag
	clr_country_flag = xhazobs_chosen_personality_flag
	clr_country_flag = shapeshifter_personality_flag
	clr_country_flag = fire_planetouched_personality_flag
	clr_country_flag = water_planetouched_personality_flag
	clr_country_flag = earth_planetouched_personality_flag
	clr_country_flag = wind_planetouched_personality_flag
	clr_country_flag = shadow_planetouched_personality_flag
	clr_country_flag = life_planetouched_personality_flag
}

apply_saved_persistent_ruler_personalities = {
	if = { limit = { has_country_flag = great_conqueror_personality_flag } add_ruler_personality = great_conqueror_personality clr_country_flag = great_conqueror_personality_flag }
	if = { limit = { has_country_flag = mythical_conqueror_personality_flag } add_ruler_personality = mythical_conqueror_personality clr_country_flag = mythical_conqueror_personality_flag }
	if = { limit = { has_country_flag = xhazobs_chosen_personality_flag } add_ruler_personality = xhazobs_chosen_personality clr_country_flag = xhazobs_chosen_personality_flag }
	if = { limit = { has_country_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_country_flag = legendary_pirate_personality_flag }
	if = { limit = { has_country_flag = shapeshifter_personality_flag } add_ruler_personality = shapeshifter_personality clr_country_flag = shapeshifter_personality_flag }
	if = { limit = { has_country_flag = fire_planetouched_personality_flag } add_ruler_personality = fire_planetouched_personality clr_country_flag = fire_planetouched_personality_flag }
	if = { limit = { has_country_flag = water_planetouched_personality_flag } add_ruler_personality = water_planetouched_personality clr_country_flag = water_planetouched_personality_flag }
	if = { limit = { has_country_flag = earth_planetouched_personality_flag } add_ruler_personality = earth_planetouched_personality clr_country_flag = earth_planetouched_personality_flag }
	if = { limit = { has_country_flag = wind_planetouched_personality_flag } add_ruler_personality = wind_planetouched_personality clr_country_flag = wind_planetouched_personality_flag }
	if = { limit = { has_country_flag = shadow_planetouched_personality_flag } add_ruler_personality = shadow_planetouched_personality clr_country_flag = shadow_planetouched_personality_flag }
	if = { limit = { has_country_flag = life_planetouched_personality_flag } add_ruler_personality = life_planetouched_personality clr_country_flag = life_planetouched_personality_flag }
	if = { limit = { has_country_flag = legendary_pirate_personality_flag } add_ruler_personality = legendary_pirate_personality clr_country_flag = legendary_pirate_personality_flag }
	if = { limit = { has_country_flag = mage_personality_flag } add_ruler_personality = mage_personality clr_country_flag = mage_personality_flag }
	if = { limit = { has_country_flag = just_personality_flag } add_ruler_personality = just_personality clr_country_flag = just_personality_flag }
	if = { limit = { has_country_flag = righteous_personality_flag } add_ruler_personality = righteous_personality clr_country_flag = righteous_personality_flag }
	if = { limit = { has_country_flag = tolerant_personality_flag } add_ruler_personality = tolerant_personality clr_country_flag = tolerant_personality_flag }
	if = { limit = { has_country_flag = kind_hearted_personality_flag } add_ruler_personality = kind_hearted_personality clr_country_flag = kind_hearted_personality_flag }
	if = { limit = { has_country_flag = free_thinker_personality_flag } add_ruler_personality = free_thinker_personality clr_country_flag = free_thinker_personality_flag }
	if = { limit = { has_country_flag = well_connected_personality_flag } add_ruler_personality = well_connected_personality clr_country_flag = well_connected_personality_flag }
	if = { limit = { has_country_flag = calm_personality_flag } add_ruler_personality = calm_personality clr_country_flag = calm_personality_flag }
	if = { limit = { has_country_flag = careful_personality_flag } add_ruler_personality = careful_personality clr_country_flag = careful_personality_flag }
	if = { limit = { has_country_flag = secretive_personality_flag } add_ruler_personality = secretive_personality clr_country_flag = secretive_personality_flag }
	if = { limit = { has_country_flag = intricate_web_weaver_personality_flag } add_ruler_personality = intricate_web_weaver_personality clr_country_flag = intricate_web_weaver_personality_flag }
	if = { limit = { has_country_flag = fertile_personality_flag } add_ruler_personality = fertile_personality clr_country_flag = fertile_personality_flag }
	if = { limit = { has_country_flag = well_advised_personality_flag } add_ruler_personality = well_advised_personality clr_country_flag = well_advised_personality_flag }
	if = { limit = { has_country_flag = benevolent_personality_flag } add_ruler_personality = benevolent_personality clr_country_flag = benevolent_personality_flag }
	if = { limit = { has_country_flag = zealot_personality_flag } add_ruler_personality = zealot_personality clr_country_flag = zealot_personality_flag }
	if = { limit = { has_country_flag = pious_personality_flag } add_ruler_personality = pious_personality clr_country_flag = pious_personality_flag }
	if = { limit = { has_country_flag = lawgiver_personality_flag } add_ruler_personality = lawgiver_personality clr_country_flag = lawgiver_personality_flag }
	if = { limit = { has_country_flag = midas_touched_personality_flag } add_ruler_personality = midas_touched_personality clr_country_flag = midas_touched_personality_flag }
	if = { limit = { has_country_flag = incorruptible_personality_flag } add_ruler_personality = incorruptible_personality clr_country_flag = incorruptible_personality_flag }
	if = { limit = { has_country_flag = architectural_visionary_personality_flag } add_ruler_personality = architectural_visionary_personality clr_country_flag = architectural_visionary_personality_flag }
	if = { limit = { has_country_flag = scholar_personality_flag } add_ruler_personality = scholar_personality clr_country_flag = scholar_personality_flag }
	if = { limit = { has_country_flag = entrepreneur_personality_flag } add_ruler_personality = entrepreneur_personality clr_country_flag = entrepreneur_personality_flag }
	if = { limit = { has_country_flag = industrious_personality_flag } add_ruler_personality = industrious_personality clr_country_flag = industrious_personality_flag }
	if = { limit = { has_country_flag = expansionist_personality_flag } add_ruler_personality = expansionist_personality clr_country_flag = expansionist_personality_flag }
	if = { limit = { has_country_flag = charismatic_negotiator_personality_flag } add_ruler_personality = charismatic_negotiator_personality clr_country_flag = charismatic_negotiator_personality_flag }
	if = { limit = { has_country_flag = silver_tongue_personality_flag } add_ruler_personality = silver_tongue_personality clr_country_flag = silver_tongue_personality_flag }
	if = { limit = { has_country_flag = conqueror_personality_flag } add_ruler_personality = conqueror_personality clr_country_flag = conqueror_personality_flag }
	if = { limit = { has_country_flag = tactical_genius_personality_flag } add_ruler_personality = tactical_genius_personality clr_country_flag = tactical_genius_personality_flag }
	if = { limit = { has_country_flag = bold_fighter_personality_flag } add_ruler_personality = bold_fighter_personality clr_country_flag = bold_fighter_personality_flag }
	if = { limit = { has_country_flag = strict_personality_flag } add_ruler_personality = strict_personality clr_country_flag = strict_personality_flag }
	if = { limit = { has_country_flag = inspiring_leader_personality_flag } add_ruler_personality = inspiring_leader_personality clr_country_flag = inspiring_leader_personality_flag }
	if = { limit = { has_country_flag = martial_educator_personality_flag } add_ruler_personality = martial_educator_personality clr_country_flag = martial_educator_personality_flag }
	if = { limit = { has_country_flag = navigator_personality_flag } add_ruler_personality = navigator_personality clr_country_flag = navigator_personality_flag }
	if = { limit = { has_country_flag = fierce_negotiator_personality_flag } add_ruler_personality = fierce_negotiator_personality clr_country_flag = fierce_negotiator_personality_flag }
	if = { limit = { has_country_flag = babbling_buffoon_personality_flag } add_ruler_personality = babbling_buffoon_personality clr_country_flag = babbling_buffoon_personality_flag }
	if = { limit = { has_country_flag = embezzler_personality_flag } add_ruler_personality = embezzler_personality clr_country_flag = embezzler_personality_flag }
	if = { limit = { has_country_flag = infertile_personality_flag } add_ruler_personality = infertile_personality clr_country_flag = infertile_personality_flag }
	if = { limit = { has_country_flag = drunkard_personality_flag } add_ruler_personality = drunkard_personality clr_country_flag = drunkard_personality_flag }
	if = { limit = { has_country_flag = sinner_personality_flag } add_ruler_personality = sinner_personality clr_country_flag = sinner_personality_flag }
	if = { limit = { has_country_flag = greedy_personality_flag } add_ruler_personality = greedy_personality clr_country_flag = greedy_personality_flag }
	if = { limit = { has_country_flag = reformist_personality_flag } add_ruler_personality = reformist_personality clr_country_flag = reformist_personality_flag }
	if = { limit = { has_country_flag = cruel_personality_flag } add_ruler_personality = cruel_personality clr_country_flag = cruel_personality_flag }
	if = { limit = { has_country_flag = naive_personality_flag } add_ruler_personality = naive_personality clr_country_flag = naive_personality_flag }
	if = { limit = { has_country_flag = craven_personality_flag } add_ruler_personality = craven_personality clr_country_flag = craven_personality_flag }
	if = { limit = { has_country_flag = loose_lips_personality_flag } add_ruler_personality = loose_lips_personality clr_country_flag = loose_lips_personality_flag }
	if = { limit = { has_country_flag = obsessive_perfectionist_personality_flag } add_ruler_personality = obsessive_perfectionist_personality clr_country_flag = obsessive_perfectionist_personality_flag }
	if = { limit = { has_country_flag = malevolent_personality_flag } add_ruler_personality = malevolent_personality clr_country_flag = malevolent_personality_flag }
	if = { limit = { has_country_flag = humane_personality_flag } add_ruler_personality = humane_personality clr_country_flag = humane_personality_flag }
	if = { limit = { has_country_flag = petty_personality_flag } add_ruler_personality = petty_personality clr_country_flag = petty_personality_flag }
}

make_ruler_immortal = {
	custom_tooltip = ruler_becomes_immortal_tt
	set_ruler_flag = immortal_ruler
}

make_heir_immortal = {
	custom_tooltip = heir_becomes_immortal_tt
	hidden_effect = {
		set_heir_flag = immortal_ruler
	}
}

make_consort_immortal = {
	custom_tooltip = consort_becomes_immortal_tt
	hidden_effect = {
		set_consort_flag = immortal_ruler
	}
}

force_add_ruler_personality = {
	if = {
		limit = { religion = neokttareum }
		hidden_effect = { clear_ancestor_vanilla_ruler_personalities = yes }
		add_ruler_personality = ancestor_$personality$
	}
	else = { force_add_normal_ruler_personality = { personality = $personality$ } }
}
force_add_normal_ruler_personality = { #Broken out for edge cases where a personality doesn't exist
	if = {
		limit = { NOT = { ruler_has_personality = $personality$ } }
		if = {
			limit = { ruler_has_max_personalities = yes }
			hidden_effect = { remove_worst_ruler_personality = yes }
		}
		add_ruler_personality = $personality$
	}
}
force_add_heir_personality = {
	if = {
		limit = { religion = neokttareum }
		clear_ancestor_vanilla_heir_personalities = yes
		add_heir_personality = ancestor_$personality$
	}
	else = {
		if = {
			limit = { NOT = { heir_has_personality = $personality$ } }
			if = {
				limit = { heir_has_max_personalities = yes }
				hidden_effect = { remove_worst_heir_personality = yes }
			}
			add_heir_personality = $personality$
		}
	}
}
force_add_consort_personality = {
	if = {
		limit = { religion = neokttareum }
		clear_ancestor_vanilla_consort_personalities = yes
		add_queen_personality = ancestor_$personality$
	}
	else = {
		if = {
			limit = { NOT = { consort_has_personality = $personality$ } }
			if = {
				limit = { consort_has_max_personalities = yes }
				hidden_effect = { remove_worst_consort_personality = yes }
			}
			add_queen_personality = $personality$
		}
	}
}

#1.37 Stuff
#add_ruler_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		add_ruler_personality = ancestor_$key$_personality
#	}
#	else = {
#		add_ruler_personality = $key$_personality
#	}
#}

#add_heir_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		add_heir_personality = ancestor_$key$_personality
#	}
#	else = {
#		add_heir_personality = $key$_personality
#	}
#}

#add_queen_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		add_queen_personality = ancestor_$key$_personality
#	}
#	else = {
#		add_queen_personality = $key$_personality
#	}
#}

#remove_ruler_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		remove_ruler_personality = ancestor_$key$_personality
#	}
#	else = {
#		remove_ruler_personality = $key$_personality
#	}
#}

#remove_heir_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		remove_heir_personality = ancestor_$key$_personality
#	}
#	else = {
#		remove_heir_personality = $key$_personality
#	}
#}

#remove_queen_personality_ancestor = {
#	# key = personality to test again
#	if = {
#		limit = { 
#			has_dlc = "Leviathan"
#			religion = totemism 
#		}
#		remove_queen_personality = ancestor_$key$_personality
#	}
#	else = {
#		remove_queen_personality = $key$_personality
#	}
#}

give_ruler_new_personality = {
	if = {
		limit = { NOT = { ruler_has_personality = $personality$_personality } }
		add_ruler_personality = $personality$_personality
	}
}

give_heir_new_personality = {
	if = {
		limit = { NOT = { heir_has_personality = $personality$_personality } }
		add_heir_personality = $personality$_personality
	}
}

give_random_good_ruler_personality = {
	random_list = {
		1 = { give_ruler_new_personality = { personality = just } }
		1 = { give_ruler_new_personality = { personality = righteous } }
		1 = { give_ruler_new_personality = { personality = tolerant } }
		1 = { give_ruler_new_personality = { personality = kind_hearted } }
		1 = { give_ruler_new_personality = { personality = free_thinker } }
		1 = { give_ruler_new_personality = { personality = well_connected } }
		1 = { give_ruler_new_personality = { personality = calm } }
		1 = { give_ruler_new_personality = { personality = careful } }
		1 = { give_ruler_new_personality = { personality = secretive } }
		1 = { give_ruler_new_personality = { personality = intricate_web_weaver } }
		1 = { give_ruler_new_personality = { personality = fertile } }
		1 = { give_ruler_new_personality = { personality = well_advised } }
		1 = { give_ruler_new_personality = { personality = benevolent } }
		1 = { give_ruler_new_personality = { personality = zealot  } }
		1 = { give_ruler_new_personality = { personality = pious } }
		1 = { give_ruler_new_personality = { personality = lawgiver } }
		1 = { give_ruler_new_personality = { personality = midas_touched } }
		1 = { give_ruler_new_personality = { personality = incorruptible } }
		1 = { give_ruler_new_personality = { personality = architectural_visionary } }
		1 = { give_ruler_new_personality = { personality = scholar } }
		1 = { give_ruler_new_personality = { personality = entrepreneur } }
		1 = { give_ruler_new_personality = { personality = industrious } }
		1 = { give_ruler_new_personality = { personality = expansionist } }
		1 = { give_ruler_new_personality = { personality = charismatic_negotiator } }
		1 = { give_ruler_new_personality = { personality = silver_tongue } }
		1 = { give_ruler_new_personality = { personality = conqueror } }
		1 = { give_ruler_new_personality = { personality = tactical_genius } }
		1 = { give_ruler_new_personality = { personality = bold_fighter } }
		1 = { give_ruler_new_personality = { personality = strict } }
		1 = { give_ruler_new_personality = { personality = inspiring_leader } }
		1 = { give_ruler_new_personality = { personality = martial_educator } }
		1 = { give_ruler_new_personality = { personality = navigator } }
		1 = { give_ruler_new_personality = { personality = fierce_negotiator } }
	}
}

give_random_bad_ruler_personality = {
	random_list = {
		1 = { give_ruler_new_personality = { personality = babbling_buffoon } }
		1 = { give_ruler_new_personality = { personality = embezzler } }
		1 = { give_ruler_new_personality = { personality = infertile } }
		1 = { give_ruler_new_personality = { personality = drunkard } }
		1 = { give_ruler_new_personality = { personality = sinner } }
		1 = { give_ruler_new_personality = { personality = greedy } }
		1 = { give_ruler_new_personality = { personality = cruel } }
		1 = { give_ruler_new_personality = { personality = naive } }
		1 = { give_ruler_new_personality = { personality = craven } }
		1 = { give_ruler_new_personality = { personality = loose_lips } }
		1 = { give_ruler_new_personality = { personality = obsessive_perfectionist } }
		1 = { give_ruler_new_personality = { personality = malevolent } }
	}
}

give_random_ruler_personality = { #Does not give mage
	random_list = {
		1 = { give_ruler_new_personality = { personality = just } }
		1 = { give_ruler_new_personality = { personality = righteous } }
		1 = { give_ruler_new_personality = { personality = tolerant } }
		1 = { give_ruler_new_personality = { personality = kind_hearted } }
		1 = { give_ruler_new_personality = { personality = free_thinker } }
		1 = { give_ruler_new_personality = { personality = well_connected } }
		1 = { give_ruler_new_personality = { personality = calm } }
		1 = { give_ruler_new_personality = { personality = careful } }
		1 = { give_ruler_new_personality = { personality = secretive } }
		1 = { give_ruler_new_personality = { personality = intricate_web_weaver } }
		1 = { give_ruler_new_personality = { personality = fertile } }
		1 = { give_ruler_new_personality = { personality = well_advised } }
		1 = { give_ruler_new_personality = { personality = benevolent } }
		1 = { give_ruler_new_personality = { personality = zealot  } }
		1 = { give_ruler_new_personality = { personality = pious } }
		1 = { give_ruler_new_personality = { personality = lawgiver } }
		1 = { give_ruler_new_personality = { personality = midas_touched } }
		1 = { give_ruler_new_personality = { personality = incorruptible } }
		1 = { give_ruler_new_personality = { personality = architectural_visionary } }
		1 = { give_ruler_new_personality = { personality = scholar } }
		1 = { give_ruler_new_personality = { personality = entrepreneur } }
		1 = { give_ruler_new_personality = { personality = industrious } }
		1 = { give_ruler_new_personality = { personality = expansionist } }
		1 = { give_ruler_new_personality = { personality = charismatic_negotiator } }
		1 = { give_ruler_new_personality = { personality = silver_tongue } }
		1 = { give_ruler_new_personality = { personality = conqueror } }
		1 = { give_ruler_new_personality = { personality = tactical_genius } }
		1 = { give_ruler_new_personality = { personality = bold_fighter } }
		1 = { give_ruler_new_personality = { personality = strict } }
		1 = { give_ruler_new_personality = { personality = inspiring_leader } }
		1 = { give_ruler_new_personality = { personality = martial_educator } }
		1 = { give_ruler_new_personality = { personality = navigator } }
		1 = { give_ruler_new_personality = { personality = fierce_negotiator } }
		1 = { give_ruler_new_personality = { personality = babbling_buffoon } }
		1 = { give_ruler_new_personality = { personality = embezzler } }
		1 = { give_ruler_new_personality = { personality = infertile } }
		1 = { give_ruler_new_personality = { personality = drunkard } }
		1 = { give_ruler_new_personality = { personality = sinner } }
		1 = { give_ruler_new_personality = { personality = greedy } }
		1 = { give_ruler_new_personality = { personality = cruel } }
		1 = { give_ruler_new_personality = { personality = naive } }
		1 = { give_ruler_new_personality = { personality = craven } }
		1 = { give_ruler_new_personality = { personality = loose_lips } }
		1 = { give_ruler_new_personality = { personality = obsessive_perfectionist } }
		1 = { give_ruler_new_personality = { personality = malevolent } }
	}
}

replace_ruler_personality_with_random_good = {
	if = {
		limit = { ruler_has_personality = $remove$_personality }
		remove_ruler_personality = $remove$_personality
		give_random_good_ruler_personality = yes
	}
}

remove_ruler_personality_effect = {
	if = {
		limit = { ruler_has_personality = $personality$_personality }
		remove_ruler_personality = $personality$_personality
	}
}

replace_all_bad_ruler_personalities_with_random_good = {
	replace_ruler_personality_with_random_good = { remove = babbling_buffoon }
	replace_ruler_personality_with_random_good = { remove = embezzler }
	replace_ruler_personality_with_random_good = { remove = infertile }
	replace_ruler_personality_with_random_good = { remove = drunkard }
	replace_ruler_personality_with_random_good = { remove = sinner }
	replace_ruler_personality_with_random_good = { remove = greedy }
	replace_ruler_personality_with_random_good = { remove = cruel }
	replace_ruler_personality_with_random_good = { remove = naive }
	replace_ruler_personality_with_random_good = { remove = craven }
	replace_ruler_personality_with_random_good = { remove = loose_lips }
	replace_ruler_personality_with_random_good = { remove = obsessive_perfectionist }
	replace_ruler_personality_with_random_good = { remove = malevolent }
}

remove_all_bad_ruler_personalities = {
	remove_ruler_personality = babbling_buffoon_personality
	remove_ruler_personality = embezzler_personality
	remove_ruler_personality = infertile_personality
	remove_ruler_personality = drunkard_personality
	remove_ruler_personality = sinner_personality
	remove_ruler_personality = greedy_personality
	remove_ruler_personality = cruel_personality
	remove_ruler_personality = naive_personality
	remove_ruler_personality = craven_personality
	remove_ruler_personality = loose_lips_personality
	remove_ruler_personality = obsessive_perfectionist_personality
	remove_ruler_personality = malevolent_personality
}

remove_random_bad_ruler_personality = {
	random_list = {
		1 = { trigger = { ruler_has_personality = babbling_buffoon_personality }
			remove_ruler_personality = babbling_buffoon_personality 
		}
		1 = { trigger = { ruler_has_personality = embezzler_personality } 
			remove_ruler_personality = embezzler_personality 
		}
		1 = { trigger = { ruler_has_personality = infertile_personality }
			remove_ruler_personality = infertile_personality 
		}
		1 = { trigger = { ruler_has_personality = drunkard_personality }
			remove_ruler_personality = drunkard_personality 
		}
		1 = { trigger = { ruler_has_personality = sinner_personality }
			remove_ruler_personality = sinner_personality 
		}
		1 = { trigger = { ruler_has_personality = greedy_personality }
			remove_ruler_personality = greedy_personality 
		}
		1 = { trigger = { ruler_has_personality = cruel_personality }
			remove_ruler_personality = cruel_personality 
		}
		1 = { trigger = { ruler_has_personality = naive_personality }
			remove_ruler_personality = naive_personality 
		}
		1 = { trigger = { ruler_has_personality = craven_personality }
			remove_ruler_personality = craven_personality 
		}
		1 = { trigger = { ruler_has_personality = loose_lips_personality }
			remove_ruler_personality = loose_lips_personality 
		}
		1 = { trigger = { ruler_has_personality = obsessive_perfectionist_personality }
			remove_ruler_personality = obsessive_perfectionist_personality 
		}
		1 = { trigger = { ruler_has_personality = malevolent_personality }
			remove_ruler_personality = malevolent_personality 
		}
	}
}

remove_random_vanilla_consort_personality = {
	random_list = {
		10 = { trigger = { consort_has_personality = just_personality } remove_queen_personality = just_personality }
		10 = { trigger = { consort_has_personality = righteous_personality } remove_queen_personality = righteous_personality }
		10 = { trigger = { consort_has_personality = tolerant_personality } remove_queen_personality = tolerant_personality }
		10 = { trigger = { consort_has_personality = kind_hearted_personality } remove_queen_personality = kind_hearted_personality }
		10 = { trigger = { consort_has_personality = free_thinker_personality } remove_queen_personality = free_thinker_personality }
		10 = { trigger = { consort_has_personality = well_connected_personality } remove_queen_personality = well_connected_personality }
		10 = { trigger = { consort_has_personality = calm_personality } remove_queen_personality = calm_personality }
		10 = { trigger = { consort_has_personality = careful_personality } remove_queen_personality = careful_personality }
		10 = { trigger = { consort_has_personality = secretive_personality } remove_queen_personality = secretive_personality }
		10 = { trigger = { consort_has_personality = intricate_web_weaver_personality } remove_queen_personality = intricate_web_weaver_personality }
		10 = { trigger = { consort_has_personality = fertile_personality } remove_queen_personality = fertile_personality }
		10 = { trigger = { consort_has_personality = well_advised_personality } remove_queen_personality = well_advised_personality }
		10 = { trigger = { consort_has_personality = benevolent_personality } remove_queen_personality = benevolent_personality }
		10 = { trigger = { consort_has_personality = zealot_personality  } remove_queen_personality = zealot_personality  }
		10 = { trigger = { consort_has_personality = pious_personality } remove_queen_personality = pious_personality }
		10 = { trigger = { consort_has_personality = lawgiver_personality } remove_queen_personality = lawgiver_personality }
		10 = { trigger = { consort_has_personality = midas_touched_personality } remove_queen_personality = midas_touched_personality }
		10 = { trigger = { consort_has_personality = incorruptible_personality } remove_queen_personality = incorruptible_personality }
		10 = { trigger = { consort_has_personality = architectural_visionary_personality } remove_queen_personality = architectural_visionary_personality }
		10 = { trigger = { consort_has_personality = scholar_personality } remove_queen_personality = scholar_personality }
		10 = { trigger = { consort_has_personality = entrepreneur_personality } remove_queen_personality = entrepreneur_personality }
		10 = { trigger = { consort_has_personality = industrious_personality } remove_queen_personality = industrious_personality }
		10 = { trigger = { consort_has_personality = expansionist_personality } remove_queen_personality = expansionist_personality }
		10 = { trigger = { consort_has_personality = charismatic_negotiator_personality } remove_queen_personality = charismatic_negotiator_personality }
		10 = { trigger = { consort_has_personality = silver_tongue_personality } remove_queen_personality = silver_tongue_personality }
		10 = { trigger = { consort_has_personality = conqueror_personality } remove_queen_personality = conqueror_personality }
		10 = { trigger = { consort_has_personality = tactical_genius_personality } remove_queen_personality = tactical_genius_personality }
		10 = { trigger = { consort_has_personality = bold_fighter_personality } remove_queen_personality = bold_fighter_personality }
		10 = { trigger = { consort_has_personality = strict_personality } remove_queen_personality = strict_personality }
		10 = { trigger = { consort_has_personality = inspiring_leader_personality } remove_queen_personality = inspiring_leader_personality }
		10 = { trigger = { consort_has_personality = martial_educator_personality } remove_queen_personality = martial_educator_personality }
		10 = { trigger = { consort_has_personality = navigator_personality } remove_queen_personality = navigator_personality }
		10 = { trigger = { consort_has_personality = fierce_negotiator_personality } remove_queen_personality = fierce_negotiator_personality }
		10 = { trigger = { consort_has_personality = babbling_buffoon_personality } remove_queen_personality = babbling_buffoon_personality }
		10 = { trigger = { consort_has_personality = embezzler_personality } remove_queen_personality = embezzler_personality }
		10 = { trigger = { consort_has_personality = infertile_personality } remove_queen_personality = infertile_personality }
		10 = { trigger = { consort_has_personality = drunkard_personality } remove_queen_personality = drunkard_personality }
		10 = { trigger = { consort_has_personality = sinner_personality } remove_queen_personality = sinner_personality }
		10 = { trigger = { consort_has_personality = greedy_personality } remove_queen_personality = greedy_personality }
		10 = { trigger = { consort_has_personality = cruel_personality } remove_queen_personality = cruel_personality }
		10 = { trigger = { consort_has_personality = naive_personality } remove_queen_personality = naive_personality }
		10 = { trigger = { consort_has_personality = craven_personality } remove_queen_personality = craven_personality }
		10 = { trigger = { consort_has_personality = loose_lips_personality } remove_queen_personality = loose_lips_personality }
		10 = { trigger = { consort_has_personality = obsessive_perfectionist_personality } remove_queen_personality = obsessive_perfectionist_personality }
		10 = { trigger = { consort_has_personality = malevolent_personality } remove_queen_personality = malevolent_personality }
	}
}

remove_random_vanilla_ruler_personality = {
	random_list = {
		10 = { trigger = { ruler_has_personality = just_personality } remove_ruler_personality = just_personality }
		10 = { trigger = { ruler_has_personality = righteous_personality } remove_ruler_personality = righteous_personality }
		10 = { trigger = { ruler_has_personality = tolerant_personality } remove_ruler_personality = tolerant_personality }
		10 = { trigger = { ruler_has_personality = kind_hearted_personality } remove_ruler_personality = kind_hearted_personality }
		10 = { trigger = { ruler_has_personality = free_thinker_personality } remove_ruler_personality = free_thinker_personality }
		10 = { trigger = { ruler_has_personality = well_connected_personality } remove_ruler_personality = well_connected_personality }
		10 = { trigger = { ruler_has_personality = calm_personality } remove_ruler_personality = calm_personality }
		10 = { trigger = { ruler_has_personality = careful_personality } remove_ruler_personality = careful_personality }
		10 = { trigger = { ruler_has_personality = secretive_personality } remove_ruler_personality = secretive_personality }
		10 = { trigger = { ruler_has_personality = intricate_web_weaver_personality } remove_ruler_personality = intricate_web_weaver_personality }
		10 = { trigger = { ruler_has_personality = fertile_personality } remove_ruler_personality = fertile_personality }
		10 = { trigger = { ruler_has_personality = well_advised_personality } remove_ruler_personality = well_advised_personality }
		10 = { trigger = { ruler_has_personality = benevolent_personality } remove_ruler_personality = benevolent_personality }
		10 = { trigger = { ruler_has_personality = zealot_personality  } remove_ruler_personality = zealot_personality  }
		10 = { trigger = { ruler_has_personality = pious_personality } remove_ruler_personality = pious_personality }
		10 = { trigger = { ruler_has_personality = lawgiver_personality } remove_ruler_personality = lawgiver_personality }
		10 = { trigger = { ruler_has_personality = midas_touched_personality } remove_ruler_personality = midas_touched_personality }
		10 = { trigger = { ruler_has_personality = incorruptible_personality } remove_ruler_personality = incorruptible_personality }
		10 = { trigger = { ruler_has_personality = architectural_visionary_personality } remove_ruler_personality = architectural_visionary_personality }
		10 = { trigger = { ruler_has_personality = scholar_personality } remove_ruler_personality = scholar_personality }
		10 = { trigger = { ruler_has_personality = entrepreneur_personality } remove_ruler_personality = entrepreneur_personality }
		10 = { trigger = { ruler_has_personality = industrious_personality } remove_ruler_personality = industrious_personality }
		10 = { trigger = { ruler_has_personality = expansionist_personality } remove_ruler_personality = expansionist_personality }
		10 = { trigger = { ruler_has_personality = charismatic_negotiator_personality } remove_ruler_personality = charismatic_negotiator_personality }
		10 = { trigger = { ruler_has_personality = silver_tongue_personality } remove_ruler_personality = silver_tongue_personality }
		10 = { trigger = { ruler_has_personality = conqueror_personality } remove_ruler_personality = conqueror_personality }
		10 = { trigger = { ruler_has_personality = tactical_genius_personality } remove_ruler_personality = tactical_genius_personality }
		10 = { trigger = { ruler_has_personality = bold_fighter_personality } remove_ruler_personality = bold_fighter_personality }
		10 = { trigger = { ruler_has_personality = strict_personality } remove_ruler_personality = strict_personality }
		10 = { trigger = { ruler_has_personality = inspiring_leader_personality } remove_ruler_personality = inspiring_leader_personality }
		10 = { trigger = { ruler_has_personality = martial_educator_personality } remove_ruler_personality = martial_educator_personality }
		10 = { trigger = { ruler_has_personality = navigator_personality } remove_ruler_personality = navigator_personality }
		10 = { trigger = { ruler_has_personality = fierce_negotiator_personality } remove_ruler_personality = fierce_negotiator_personality }
		10 = { trigger = { ruler_has_personality = babbling_buffoon_personality } remove_ruler_personality = babbling_buffoon_personality }
		10 = { trigger = { ruler_has_personality = embezzler_personality } remove_ruler_personality = embezzler_personality }
		10 = { trigger = { ruler_has_personality = infertile_personality } remove_ruler_personality = infertile_personality }
		10 = { trigger = { ruler_has_personality = drunkard_personality } remove_ruler_personality = drunkard_personality }
		10 = { trigger = { ruler_has_personality = sinner_personality } remove_ruler_personality = sinner_personality }
		10 = { trigger = { ruler_has_personality = greedy_personality } remove_ruler_personality = greedy_personality }
		10 = { trigger = { ruler_has_personality = cruel_personality } remove_ruler_personality = cruel_personality }
		10 = { trigger = { ruler_has_personality = naive_personality } remove_ruler_personality = naive_personality }
		10 = { trigger = { ruler_has_personality = craven_personality } remove_ruler_personality = craven_personality }
		10 = { trigger = { ruler_has_personality = loose_lips_personality } remove_ruler_personality = loose_lips_personality }
		10 = { trigger = { ruler_has_personality = obsessive_perfectionist_personality } remove_ruler_personality = obsessive_perfectionist_personality }
		10 = { trigger = { ruler_has_personality = malevolent_personality } remove_ruler_personality = malevolent_personality }
	}
}

give_heir_random_good_personality_normal = {
	custom_tooltip = give_heir_random_good_personality_normal_tt
	hidden_effect = {
		random_list = {
			1 = { trigger = { NOT = { heir_has_personality = just } } give_heir_new_personality = { personality = just } }
			1 = { trigger = { NOT = { heir_has_personality = righteous } } give_heir_new_personality = { personality = righteous } }
			1 = { trigger = { NOT = { heir_has_personality = tolerant } } give_heir_new_personality = { personality = tolerant } }
			1 = { trigger = { NOT = { heir_has_personality = kind_hearted } } give_heir_new_personality = { personality = kind_hearted } }
			1 = { trigger = { NOT = { heir_has_personality = free_thinker } } give_heir_new_personality = { personality = free_thinker } }
			1 = { trigger = { NOT = { heir_has_personality = well_connected } } give_heir_new_personality = { personality = well_connected } }
			1 = { trigger = { NOT = { heir_has_personality = calm } } give_heir_new_personality = { personality = calm } }
			1 = { trigger = { NOT = { heir_has_personality = careful } } give_heir_new_personality = { personality = careful } }
			1 = { trigger = { NOT = { heir_has_personality = secretive } } give_heir_new_personality = { personality = secretive } }
			1 = { trigger = { NOT = { heir_has_personality = intricate_web_weaver } } give_heir_new_personality = { personality = intricate_web_weaver } }
			1 = { trigger = { NOT = { heir_has_personality = fertile } } give_heir_new_personality = { personality = fertile } }
			1 = { trigger = { NOT = { heir_has_personality = well_advised } } give_heir_new_personality = { personality = well_advised } }
			1 = { trigger = { NOT = { heir_has_personality = benevolent } } give_heir_new_personality = { personality = benevolent } }
			1 = { trigger = { NOT = { heir_has_personality = zealot } } give_heir_new_personality = { personality = zealot  } }
			1 = { trigger = { NOT = { heir_has_personality = pious } } give_heir_new_personality = { personality = pious } }
			1 = { trigger = { NOT = { heir_has_personality = lawgiver } } give_heir_new_personality = { personality = lawgiver } }
			1 = { trigger = { NOT = { heir_has_personality = midas_touched } } give_heir_new_personality = { personality = midas_touched } }
			1 = { trigger = { NOT = { heir_has_personality = incorruptible } } give_heir_new_personality = { personality = incorruptible } }
			1 = { trigger = { NOT = { heir_has_personality = architectural_visionary } } give_heir_new_personality = { personality = architectural_visionary } }
			1 = { trigger = { NOT = { heir_has_personality = scholar } } give_heir_new_personality = { personality = scholar } }
			1 = { trigger = { NOT = { heir_has_personality = entrepreneur } } give_heir_new_personality = { personality = entrepreneur } }
			1 = { trigger = { NOT = { heir_has_personality = industrious } } give_heir_new_personality = { personality = industrious } }
			1 = { trigger = { NOT = { heir_has_personality = expansionist } } give_heir_new_personality = { personality = expansionist } }
			1 = { trigger = { NOT = { heir_has_personality = charismatic_negotiator } } give_heir_new_personality = { personality = charismatic_negotiator } }
			1 = { trigger = { NOT = { heir_has_personality = silver_tongue } } give_heir_new_personality = { personality = silver_tongue } }
			1 = { trigger = { NOT = { heir_has_personality = conqueror } } give_heir_new_personality = { personality = conqueror } }
			1 = { trigger = { NOT = { heir_has_personality = tactical_genius } } give_heir_new_personality = { personality = tactical_genius } }
			1 = { trigger = { NOT = { heir_has_personality = bold_fighter } } give_heir_new_personality = { personality = bold_fighter } }
			1 = { trigger = { NOT = { heir_has_personality = strict } } give_heir_new_personality = { personality = strict } }
			1 = { trigger = { NOT = { heir_has_personality = inspiring_leader } } give_heir_new_personality = { personality = inspiring_leader } }
			1 = { trigger = { NOT = { heir_has_personality = martial_educator } } give_heir_new_personality = { personality = martial_educator } }
			1 = { trigger = { NOT = { heir_has_personality = navigator } } give_heir_new_personality = { personality = navigator } }
			1 = { trigger = { NOT = { heir_has_personality = fierce_negotiator } } give_heir_new_personality = { personality = fierce_negotiator } }
		}
	}
}