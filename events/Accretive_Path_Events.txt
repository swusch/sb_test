namespace = accretive_path_events

#To Tend Another's Garden:

country_event = {
    id = accretive_path_events.1
    title = accretive_path_events.1.t
    desc = accretive_path_events.1.d
    picture = DIPLOMACY_eventPicture
    goto = gardens_claims_province

    is_triggered_only = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        religion = accretive_path
        NOT = { has_country_modifier = ap_tending_the_gardens }
        any_neighbor_province = {
            owner = {
                religion = accretive_path
            }
            NOT = {
                is_claim = ROOT
            }
            NOT = {
                is_core = ROOT
            }
        }
        OR = {
            spymaster = 1
            ruler_has_personality = intricate_web_weaver_personality
            any_neighbor_province = {
                owner = {
                    religion = accretive_path
                    has_spy_network_from = {
                        who = ROOT
                        value = 50
                    }
                }
                NOT = { is_claim = ROOT }
                NOT = { is_core = ROOT }
                
            }
        }
    }

    immediate = {
        hidden_effect = {
            if = {
                limit = {
                    any_neighbor_province = {
                        NOT = { is_claim = ROOT }
                        NOT = { is_core = ROOT }
                        owner = {
                            has_spy_network_from = { 
                                who = ROOT 
                                value = 50 
                            }
                            religion = accretive_path
                        }
                    }
                }
                random_neighbor_province = {
                    limit = {
                        NOT = { is_claim = ROOT }
                        NOT = { is_core = ROOT }
                        owner = {
                            has_spy_network_from = { 
                                who = ROOT 
                                value = 50 
                            }
                            religion = accretive_path
                        }
                    }
                    owner = {
                        save_event_target_as = gardens_untended
                    }
                    save_event_target_as = gardens_claims_province
                }
            }
            else = {
                random_neighbor_province = {
                    limit = {
                        NOT = { is_claim = ROOT }
                        NOT = { is_core = ROOT }                        
                        owner = { 
                            religion = accretive_path
                        }
                    }
                    owner = {
                        save_event_target_as = gardens_untended
                    }
                    save_event_target_as = gardens_claims_province                    
                }
            }
        }
    }

    option = {
        ai_chance = { factor = 30 }
        name = "accretive_path_events.1.a"
        event_target:gardens_claims_province = {
            add_claim = ROOT
        }
        add_church_power = -25
        reverse_add_opinion = {
            who = event_target:gardens_untended
            modifier = "ap_stole_your_garden"
        }
        add_country_modifier = {
            name = ap_tending_the_gardens
            duration = 5475
        }
    }

    option = {
        ai_chance = { factor = 10 }
        name = "accretive_path_events.1.b"
        add_church_power = 25
        add_adm_power = 25
    }

    option = {
        ai_chance = { factor = 60 }
        name = "accretive_path_events.1.c"
        highlight = yes
        trigger = {
            OR = {
                ruler_has_personality = kind_hearted_personality
                ruler_has_personality = benevolent_personality
                ruler_has_personality = pious_personality
                ruler_has_personality = strict_personality
            }
        }
        add_church_power = 25
        add_dip_power = 25
        event_target:gardens_untended = {
            add_church_power = 25
        }
        every_known_country = {
            limit = {
                NOT = { tag = ROOT }
                religion = accretive_path
            }
            add_opinion = {
                who = ROOT
                modifier = "ap_enlightenment_reminded"
            }
        }
    }
}

#Where The Path Begins

country_event = {
    id = accretive_path_events.2
    title = accretive_path_events.2.t
    desc = accretive_path_events.2.d
    picture = PRAYING_eventPicture
	
	is_triggered_only = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	trigger = {
		religion = accretive_path
		NOT = { has_country_flag = ap_path_begun }
		heir_age = 8
		NOT = { heir_age = 14 }
		}
		
	immediate = {
			hidden_effect = {
				set_country_flag = ap_path_begun
            }
	}
		
	option = {
		ai_chance = { factor = 30 }
		name = "accretive_path_events.2.a"
		add_church_power = 15
		add_heir_claim = 5
		increase_heir_adm_effect = yes
		if = {
            limit = {
                max_manpower = 100
            }
            add_manpower = -7.5
        }
        else = {
            add_yearly_manpower	= -0.75
        }
	}
			
	option = {
		ai_chance = { factor = 30 }
		name = "accretive_path_events.2.b"
		add_church_power = 15
		add_heir_claim = 5
        increase_heir_dip_effect = yes
		if = {
            limit = {
                max_manpower = 100
            }
            add_manpower = -7.5
        }
        else = {
            add_yearly_manpower	= -0.75
        }
	}
	
	option = {
		ai_chance = { factor = 30 }
		name = "accretive_path_events.2.c"
		add_church_power = 15
		add_heir_claim = 5
		increase_heir_mil_effect = yes
		if = {
            limit = {
                max_manpower =  100
            }
            add_manpower = -7.5
        }
        else = {
            add_yearly_manpower	= -0.75
        }
	}
	
	option = {
		ai_chance = { factor = 10 }
		name = "accretive_path_events.2.e"
		add_church_power = -15
		add_heir_claim = -5
	}
}

#The Monk and the Blade

country_event = {
    id = accretive_path_events.3
    title = accretive_path_events.3.t
    desc = accretive_path_events.3.d
    picture = SOLDIER_INFIGHTING_eventPicture

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        NOT = {
            is_at_war = yes
        }
        NOT = {
            has_country_modifier = ap_monkblade_chi_repressed
            has_country_modifier = ap_monkblade_strength_chi
        }
        num_of_generals = 1
    }
    
    option = {
        ai_chance = { factor = 10 }
        name = "accretive_path_events.3.a"
        add_church_power = -10
        add_years_of_income = 0.083
        add_country_modifier = {
            name = ap_monkblade_chi_repressed
            duration = 3650
        }
        add_estate_influence_modifier = {
            estate = estate_nobles
            desc = ap_monkblade_chi_repressed
            influence = 10
            duration = 3650
        }
        add_estate_loyalty_modifier = {
            estate = estate_nobles
            desc = ap_monkblade_chi_repressed
            loyalty = 10
            duration = 3650
        }
    }

    option = {
        ai_chance = { factor = 30 }
        name = "accretive_path_events.3.b"
        add_country_modifier = {
            name = ap_monkblade_strength_chi
            duration = 3650
        }
        add_estate_influence_modifier = {
            estate = estate_nobles
            desc = ap_monkblade_strength_chi
            influence = -10
            duration = 3650
        }
        add_estate_loyalty_modifier = {
            estate = estate_nobles
            desc = ap_monkblade_strength_chi
            loyalty = -10
            duration = 3650
        }
        kill_leader = {
            type = general
        }
    }

    option = {
        ai_chance = { factor = 60 }
        name = "accretive_path_events.3.c"
        add_church_power = 40
        add_army_tradition = -2.5
    }
}

# An Empty Scroll

country_event = {
    id = accretive_path_events.4
    title = accretive_path_events.4.t
    desc = accretive_path_events.4.d
    picture = PAINTER_ARTIST_eventPicture

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        paper = 1
        capital_scope = {
            is_prosperous = yes
        }    
    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    trade_goods = paper
                }
                save_event_target_as = empty_scroll_artisthome
            }
        }
    }

    option = {
        ai_chance = { factor = 20 }
        name = "accretive_path_events.4.a"
        add_church_power = -15
        add_prestige = -10
    }

    option = {
        name = "accretive_path_events.4.b"
        random_list = {
            50 = {
                capital_scope = {
                    spawn_rebels = {
                        type = particularist_rebels
                        size = 8 
                    }
                }
            }
            50 = {
                modifier = {
                    factor = 1.75
                    OR = {
                        ruler_has_personality = patron_of_arts_personality
                        artist = 1
                    }
                }
                add_splendor = 75
            }
        }
    }

    option = {
        ai_chance = { factor = 75 }
        name = "accretive_path_events.4.c"
        highlight = yes
        trigger = {
            OR = {
                ruler_has_personality = pious_personality
                ruler_has_personality = naive_personality
            }
        }
        add_church_power = 30
        random_list = {
            1 = {
                kill_ruler = yes
            }
            99 = {
                add_dip_power = 50
                add_country_modifier = {
                    name = ap_secrets_of_the_scroll
                    duration = 1825
                }
            }
        }
    }
}

#A Garden of Stillness

country_event = {
    id = accretive_path_events.5
    title = accretive_path_events.5.t
    desc = accretive_path_events.5.d
    picture = SURAKES_SUN_GARDEN_eventPicture
    goto = ap_stillgarden_temple

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        NOT = {
            has_country_modifier = ap_stillgarden_wellwalked_temples
        }
        any_owned_province = {
            NOT = {
                has_province_modifier = ap_stillgarden_popular_temple
                has_province_modifier = ap_stillgarden_restricted_temple
            }
        }
        any_owned_province = {
            development = 30
            OR = {
                has_building = temple
                has_building = cathedral
            }
        }
    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    development = 30
                    OR = {
                        has_building = temple
                        has_building = cathedral
                    }
                }
            save_event_target_as = ap_stillgarden_temple
            }
        }
    }

    option = {
        name = "accretive_path_events.5.a"
        ai_chance = {
            factor = 50
            modifier = {
                factor = 2
                OR = {
                    spymaster = 1
                    ruler_has_personality = intricate_web_weaver_personality
                }                
            }
        }
        add_country_modifier = {
            name = ap_stillgarden_wellwalked_temples
            duration = 3650
        }
        event_target:ap_stillgarden_temple = {
            add_province_modifier = {
                name = ap_stillgarden_popular_temple
                duration = 3650
            }
        }
    }

    option = {
        name = "accretive_path_events.5.b"
        ai_chance = {
            factor = 50
            modifier = {
                factor = 2
                ruler_has_personality = pious_personality
            }
        }
        add_church_power = 40
        event_target:ap_stillgarden_temple = {
            add_province_modifier = {
                name = ap_stillgarden_restricted_temple
                duration = 3650
            }
        }
    }
}

#Enlightenment Incarnate

country_event = {
    id = accretive_path_events.6
    title = accretive_path_events.6.t
    desc = accretive_path_events.6.d
    picture = STREET_SPEECH_eventPicture

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        prestige = 30
        stability = 1
        NOT = {
            has_country_modifier = ap_enlightenmentincarnate_EI
        }
        OR = {
            mil = 5
            adm = 5
            dip = 5
        }
        num_of_subjects = 1
        any_subject_country = {
            religion = accretive_path
            has_opinion = {
                who = ROOT
                value = 150
            }
            NOT = {
                liberty_desire = 30
            }
        }
    }

    immediate = {
        hidden_effect = {
            random_subject_country = {
                limit = {
                    religion = accretive_path
                    has_opinion = {
                        who = ROOT
                        value = 150
                    }
                    NOT = {
                        liberty_desire = 30
                    }
                }
                save_event_target_as = ap_enlightenmentincarnate_subject
            }
        }
    }

    option = {
        ai_chance = { factor = 10 }
        name = "accretive_path_events.6.a"
        add_church_power = 40
        reverse_add_opinion = {
            who = event_target:ap_enlightenmentincarnate_subject
            modifier = "ap_enlightenmentincarnate_poet_silenced"
        }
    }

    option = {
        ai_chance = {
            factor = 10
            modifier = {
                factor = 0.05
                artist = 1
            }
            modifier = {
                factor = 2
                ruler_has_personality = patron_of_arts_personality
            }
        }
        name = "accretive_path_events.6.b"
        add_church_power = 20
        define_advisor = {
            type = artist
            skill = 2
            cost_multiplier = 0.5
            culture = event_target:ap_enlightenmentincarnate_subject
            religion = event_target:ap_enlightenmentincarnate_subject
        }
    }

    option = {
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                army_size_percentage = 1
            }
        }
        name = "accretive_path_events.6.c"
        highlight = yes
        trigger = {
            OR = {
                ruler_has_personality = cruel_personality
                ruler_has_personality = conqueror_personality
            }
        }
        add_church_power = 20
        add_country_modifier = {
            name = ap_enlightenmentincarnate_EI
            duration = 3650
        }
        every_neighbor_country = {
            limit = {
                NOT = { tag = ROOT }
                NOT = { tag = event_target:ap_enlightenmentincarnate_subject }
            }
            add_opinion = {
                who = ROOT
                modifier = "ap_enlightenmentincarnate_EI_opinion"
            }
        }
    }

    option = {
        ai_chance = {
            factor = 40
            modifier = {
                factor = 2
                NOT = { stability = 2 }
            }
        }
        name = "accretive_path_events.6.e"
        highlight = yes
        trigger = {
            OR = {
                ruler_has_personality = sinner_personality
                ruler_has_personality = indulgent_personality
            }
        }
        add_stability = 1
        add_church_power = -40
        add_legitimacy_equivalent = { amount = 10 republican_tradition = 4 }
        every_known_country = {
            limit = {
                NOT = { tag = ROOT }
                religion = accretive_path
            }
            add_opinion = {
                who = ROOT
                modifier = "ap_enlightenmentincarnate_accepted"
            }
        }
    }
}

#The Sound of Falling Leaves

country_event = {
    id = accretive_path_events.7
    title = accretive_path_events.7.t
    desc = accretive_path_events.7.d
    picture = COURT_eventPicture

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        NOT = { is_at_war = yes }
        NOT = { is_in_deficit = yes }
        NOT = { num_of_loans = 1 }
        NOT = { is_bankrupt = yes }
        is_month = 8
        NOT = { is_month = 11 }
        NOT = { had_recent_war = 5 }
    }

    option = {
        ai_chance = {
            factor = 2.5
            modifier = {
                factor = 0
                stability = 3
            }
            modifier = {
                factor = 4
                NOT = { stability = 0 }
            }
        }
        name = "accretive_path_events.7.a"
        add_church_power = 15
        add_stability = 1
    }

    option = {
        ai_chance = {
            factor = 2.5
            modifier = {
                factor = 4
                OR = {
                    NOT = { adm_power = 75 }
                    NOT = { dip_power = 75 }
                    NOT = { mil_power = 75 }
                }
            }
        }
        name = "accretive_path_events.7.b"
        add_church_power = 15
        add_adm_power = 25
        add_dip_power = 25
        add_mil_power = 25
    }

    option = {
        ai_chance = { factor = 95 }
        trigger = {
            ruler_has_personality = pious_personality
        }
        highlight = yes
        name = "accretive_path_events.7.c"
        add_church_power = 50
        add_stability = 1
        add_adm_power = 25
        add_dip_power = 25
        add_mil_power = 25
    }
}

#Monastic Outreach

country_event = {
    id = accretive_path_events.8
    title = accretive_path_events.8.t
    desc = accretive_path_events.8.d
    picture = RELIGION_eventPicture
    goto = ap_monasticoutreach_province

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        NOT = {
            has_country_modifier = ap_monasticoutreach_wellfunded
            any_owned_province = {
                OR = {
                    has_province_modifier = ap_monasticoutreach_findingpath
                    has_province_modifier = ap_monasticoutreach_unsuccessfulteach
                }
            }
        }
        any_owned_province = {
            NOT = { religion = accretive_path }
        }
    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    NOT = { religion = accretive_path }
                }
                save_event_target_as = ap_monasticoutreach_province
            }
        }
    }

    option = {
        ai_chance = {
            factor = 30
            modifier = {
                factor = 0.15
                NOT = {
                    monthly_income = 84
                }
            }
            modifier = {
                factor = 2
                ruler_has_personality = pious_personality
                monthly_income = 84
            }
        }
        name = "accretive_path_events.8.a"
        if = {
                limit = {
                    monthly_income = 84
                }
                add_treasury = -500
            }
            else = {
                add_years_of_income = -0.5
            }
        add_church_power = 40
        add_country_modifier = {
            name = "ap_monasticoutreach_wellfunded"
            duration = 5475
        }
    }

    option = {
        ai_chance = { factor = 30 }
        name = "accretive_path_events.8.b"
        add_church_power = 20
        event_target:ap_monasticoutreach_province = {
            add_province_modifier = {
                name = "ap_monasticoutreach_findingpath"
                duration = 5475
            }
        }
    }

    option = {
        ai_chance = {
            factor = 30
            modifier = {
                factor = 2
                OR = {
                    ruler_has_personality = greedy_personality
                    ruler_has_personality = embezzler_personality
                }
            }
        }
        name = "accretive_path_events.8.c"
        add_church_power = -20
        event_target:ap_monasticoutreach_province = {
            add_province_modifier = {
                name = "ap_monasticoutreach_unsuccessfulteach"
                duration = 5475
            }
        }
    }
}

#Stones in the Stream

country_event = {
    id = accretive_path_events.9
    title = accretive_path_events.9.t
    desc = accretive_path_events.9.d
    picture = RELIGION_eventPicture
    goto = ap_stonesinstream_province

    is_triggered_only = yes

    mean_time_to_happen = {
		days = 1
	}

    trigger = {
        religion = accretive_path
        any_owned_province = {
            has_missionary = yes
            unrest = 5
            NOT = {
                    has_province_modifier = ap_stonesinstream_wellguarded
                    has_province_modifier = ap_stonesinstream_templeguard
                    has_province_modifier = ap_stonesinstream_stonesinstream
            }
        }
        is_year = 1600
    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    has_missionary = yes
                    unrest = 5
                    NOT = {
                        OR = {
                            has_province_modifier = ap_stonesinstream_wellguarded
                            has_province_modifier = ap_stonesinstream_templeguard
                            has_province_modifier = ap_stonesinstream_stonesinstream
                        }
                    }
                }
                save_event_target_as = ap_stonesinstream_province
            }
        }
    }

    option = {
        ai_chance = { factor = 20 }
        name = "accretive_path_events.9.a"
        add_church_power = -20
        if = {
            limit = {
                max_manpower = 100
            }
            add_manpower = -5
        }
        else = {
            add_yearly_manpower = -0.5
        }
        event_target:ap_stonesinstream_province = {
            add_province_modifier = {
                name = "ap_stonesinstream_wellguarded"
                duration = 1825
            }
            add_province_modifier = {
                name= "ap_stonesinstream_convert"
                duration = -1
            }
        }
        custom_tooltip = ap_stonesinstream_convert_tooltip
    }

    option = {
        ai_chance = {
            factor = 20
            modifier = {
                factor = 4
                ruler_has_personality = pious_personality
            }
        }
        name = accretive_path_events.9.b
        add_church_power = 40
        add_province_modifier = {
            name = ap_stonesinstream_stonesinstream
            duration = 5475
        }
        event_target:ap_stonesinstream_province = {
            province_event = {
                id = accretive_path_events.11
                days = 5475
            }
        }
    }

    option = {
        ai_chance = {
            factor = 20
            modifier = {
                factor = 3
                OR = {
                    ruler_has_personality = greedy_personality
                    ruler_has_personality = embezzler_personality
                }
            }
        }
        name = accretive_path_events.9.c
        add_church_power = -30
    }
}

#Stones In Stream sub-events

province_event = {
    hidden = yes
    id = accretive_path_events.11
    title = accretive_path_events.11.t
    picture = none
    desc = accretive_path_events.11.d
    is_triggered_only = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        owner = {
            religion = accretive_path
        }
    }

    immediate = {
        change_religion = accretive_path
    }

    option = {
    }
}  

province_event = {
    id = accretive_path_events.13
    title = accretive_path_events.13.t
    picture = RELIGION_eventPicture
    desc = accretive_path_events.13.d
    is_triggered_only = yes

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = accretive_path_events.13.a
				if = {
					limit = {
						NOT = {
							has_building = temple
							has_building = cathedral
						}
					}
					add_building_construction = {
						building = temple
						speed = 1.5
						cost = 0.5
					}
				}
				else_if = {
					limit = {
						has_building = temple
						NOT = {
							has_building = cathedral
						}
					}
					add_building_construction = {
						building = cathedral
						speed = 1.5
						cost = 0.5
					}
				}
				else = {
					add_province_modifier = {
						name = ap_stonesinstream_templeguard
						duration = -1
					}
				}
                remove_province_modifier = ap_stonesinstream_convert
            }

}

#Rusted Blades

country_event = {
    id = accretive_path_events.10
    title = accretive_path_events.10.t
    desc = accretive_path_events.10.d
    picture = not_disciplined_soliders

    is_triggered_only = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        religion = accretive_path
        NOT = { is_at_war = yes }
        army_size_percentage = 0.75
        NOT = {
            num_of_rebel_armies = 1
            num_of_rebel_controlled_provinces = 1
        }
        any_owned_province = {
            is_core = ROOT
            OR = {
                has_building = barracks
                has_building = training_fields
                has_building = regimental_camp
                has_building = conscription_center
            }
        }
        NOT = {
            has_country_flag = ap_rustedblades_happened
        }
    }

    immediate = {
        hidden_effect = {
            random_owned_province = {
                limit = {
                    is_core = ROOT
                    OR = {
                        has_building = barracks
                        has_building = training_fields
                        has_building = regimental_camp
                        has_building = conscription_center
                    }
                }
            save_event_target_as = ap_rustedblades_province
            }
            set_country_flag = ap_rustedblades_happened
        }
    }

    option = {
        ai_chance = {
            factor = 80
            modifier = {
                factor = 0.125
                OR = {
                    ruler_has_personality = greedy_personality
                    NOT = {
                        treasury = 50
                    }
                }
            }
        }
        name = "accretive_path_events.10.a"
        if = {
            limit = {
                monthly_income = 50
            }
            add_treasury = -50
        }
        else = {
            add_years_of_income = -0.0833
        }
        add_church_power = 25
        add_country_modifier = {
            name = "ap_rustedblades_quietmarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
        country_event = {
            id = accretive_path_events.12
            days = 182
        }
    }

    option = {
        ai_chance = { factor = 20 }
        name = "accretive_path_events.10.b"
        add_church_power = 25
        add_mil_power = 25
        add_country_modifier = {
            name = "ap_rustedblades_sharpenedchi"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
}

#The Quiet March
country_event = {
    id = accretive_path_events.12
    title = accretive_path_events.12.t
    desc = accretive_path_events.12.d
    picture = disciplined_soliders

    is_triggered_only = yes

    mean_time_to_happen = {
        days = 1
    }

    trigger = {
        religion = accretive_path
        NOT = {
            is_at_war = yes
        }
    }

    option = {
        name = "accretive_path_events.12.a"
        add_country_modifier = {
            name = "ap_rustedblades_productivemarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
    option = {
        name = "accretive_path_events.12.b"
        add_country_modifier = {
            name = "ap_rustedblades_recruitmentmarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
    option = {
        name = "accretive_path_events.12.c"
        add_country_modifier = {
            name = "ap_rustedblades_caravanmarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
    option = {
        name = "accretive_path_events.12.e"
        add_country_modifier = {
            name = "ap_rustedblades_religiousmarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
    option = {
        name = "accretive_path_events.12.f"
        add_country_modifier = {
            name = "ap_rustedblades_surveillancemarch"
            duration = -1
        }
        custom_tooltip = ap_rustedblades_war
    }
}