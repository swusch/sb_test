namespace = flavor_beiklings

country_event = { #Chinhu Independence
	id = flavor_beiklings.1
	title = flavor_beiklings.1.t
	desc = flavor_beiklings.1.d
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		is_year = 1454
		owns = 4828
		NOT = { tag = R62 }
		is_free_or_tributary_trigger = yes
		NOT = { has_country_flag = NO_CHINHU_REBELLION }
		NOT = { exists = V21 }
	}


	option = {
		name = flavor_beiklings.1.a
		ai_chance = {
			factor = 60
		}

		4828 = {
			add_local_autonomy = 40
		}
	}

	option = {
		name = flavor_beiklings.1.b
		ai_chance = {
			factor = 30
		}

		4828 = {
			spawn_rebels = {
				size = 3
				type = leadered_peasant_rebels
			}
		}
	}	

	option = {
		name = flavor_beiklings.1.c
		ai_chance = {
			factor = 10
		}

		highlight = yes
		moryokang_area = {
			type = ALL
			remove_core = ROOT
		}
		release = V21
		add_truce_with = V21
		switch_tag = V21
		custom_tooltip = country_no_mt.tt
		hidden_effect = {
			V21 = {
				add_government_reform = leading_clergy_reform
				create_unit_forcelimit_percentage = {
					type = infantry 
					force_limit_percentage = 0.5 
				}
				create_unit_forcelimit_percentage = {
					type = cavalry
					force_limit_percentage = 0.2 
				}
				define_ruler = {
					name = "Ruxiu"
					dynasty = "of the Golden Gate"
					adm = 4
					dip = 4
					mil = 5
					age = 41
					claim = 95
					culture = beikling
				}
				add_ruler_personality = greedy_personality
				add_ruler_personality = incorruptible_personality
				convert_ruler_to_general = 60
			}
		}
	}
}

country_event = { #Xiongxiap Independence
	id = flavor_beiklings.2
	title = flavor_beiklings.2.t
	desc = flavor_beiklings.2.d
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	trigger = { }


	option = {
		name = flavor_beiklings.2.a
		ai_chance = {
			factor = 30
		}

		add_manpower = 5
	}

	option = {
		name = flavor_beiklings.2.b
		ai_chance = {
			factor = 30
		}

		add_treasury = 60
	}	

	option = {
		name = flavor_beiklings.2.c
		ai_chance = {
			factor = 30
		}

		add_prestige = 20
	}	

	option = {
		name = flavor_beiklings.2.e
		ai_chance = {
			factor = 10
		}

		highlight = yes
		Y02 = { 
			release = Z61
			declare_war_with_cb = {
				casus_belli = cb_core
				who = Z61
				war_goal_province = 4843
			}
		}
		create_march = Z61
		switch_tag = Z61
		custom_tooltip = country_no_mt.tt
		hidden_effect = {
			Z61 = {
				add_government_reform = merchants_reform
				create_unit_forcelimit_percentage = {
					type = infantry 
					force_limit_percentage = 0.6 
				}
				create_unit_forcelimit_percentage = {
					type = cavalry
					force_limit_percentage = 0.3 
				}
				define_ruler = {
					name = "Weizhen Suzhen"
					adm = 4
					dip = 5
					mil = 2
					age = 29
					claim = 95
					culture = beikling
				}
				add_ruler_personality = greedy_personality
				add_ruler_personality = incorruptible_personality
				convert_ruler_to_general = 80
			}
		}
	}
}


country_event = { #Jianlin Independence
	id = flavor_beiklings.3
	title = flavor_beiklings.3.t
	desc = flavor_beiklings.3.d
	picture = NOT_DISCIPLINED_SOLDIERS_eventPicture
	
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {}
	
	
	option = {
		name = flavor_beiklings.3.a
		ai_chance = {
			factor = 20
		}

		add_treasury = -150
		4855 = {
			add_base_production = 1
			add_base_manpower = 1
			add_base_tax = 1
		}
	}
	
	option = {
		name = flavor_beiklings.3.b
		ai_chance = {
			factor = 70
		}

		4855 = { add_unrest = 10 }
	}	
	
	option = {
		name = flavor_beiklings.3.c
		ai_chance = {
			factor = 10
		}

		highlight = yes
		change_tag = V22
		custom_tooltip = jianlin_lose_mt.tt
		custom_tooltip = country_no_mt.tt
		hidden_effect = {
			V22 = {
				add_historical_friend = Y06
				add_historical_friend = Y04
				add_historical_friend = Y10
				add_historical_friend = Y07
				add_historical_friend = Y08
				add_historical_friend = Y85
				add_government_reform = stratocracy_reform
				remove_government_reform = yanzhong_patrol_reform
				swap_free_idea_group = yes
				swap_non_generic_missions = yes
				change_primary_culture = beikling
				add_accepted_culture = jiangszun
				add_accepted_culture = serene_harimari
				set_capital = 4855
				change_religion = accretive_path
				define_ruler = {
					name = "Zhan'ao of the Enlightened Path"
					dynasty = "of the Enlightened Path"
					adm = 3
					dip = 5
					mil = 4
					age = 49
					claim = 95
					culture = beikling
				}
				add_ruler_personality = zealot_personality
				add_ruler_personality = righteous_personality
				convert_ruler_to_general = 70
			}
			Y06 = { add_historical_friend = ROOT }
			Y04 = { add_historical_friend = ROOT }
			Y10 = { add_historical_friend = ROOT }
			Y07 = { add_historical_friend = ROOT }
			Y08 = { add_historical_friend = ROOT }
			Y85 = { add_historical_friend = ROOT }
		}
	}
}

country_event = {
	id = flavor_beiklings.4
	title = flavor_beiklings.4.t
	desc = flavor_beiklings.4.d
	picture = LOOMING_DEATH_eventPicture

	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {}

	option = {
		name = flavor_beiklings.4.a

		change_tag = V23
		set_government_rank_scripted_effect = { rank = 2 }
		hidden_effect = { restore_country_name = yes }
		if = {
			limit = { has_custom_ideas = no }
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		add_country_modifier = {
			name = "luzhong_dark_revival"
			duration = 7300
		}
		add_country_modifier = {
			name = "centralization_modifier"
			duration = 7300
		}

		add_prestige = 25
		yanshen_superregion = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
			add_permanent_claim = ROOT
		}
	}
}

country_event = { #Rekindle the Beikling Wonders
	id = flavor_beiklings.300
	title = flavor_beiklings.300.t
	desc = flavor_beiklings.300.d
	picture = CITY_VIEW_eventPicture

	is_triggered_only = yes
	
	trigger = {}

	immediate = {
		hidden_effect = {
			set_country_flag = beikling_wonders_menu_open
		}
	}

	after = {
		hidden_effect = {
			clr_country_flag = beikling_wonders_menu_open
		}
	}
	
	option = {
		name = flavor_beiklings.300.z
		ai_chance = { factor = 1 }
	}

	option = { #Masterforge Build
		name = flavor_beiklings.300.a
		ai_chance = { factor = 0 }

		goto = 4974

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 1
					}
				}
				4974 = { #Yinsheng
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_masterforge
						has_province_modifier = the_masterforge_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_masterforge_build.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 500
						4974 = {
							AND = {
								owned_by = ROOT
								base_production = 6
								has_production_building_trigger = yes
								has_trade_building_trigger = yes
							}
						}
						beikling_homeland_provinces = {
							type = all
							OR = {
								NOT = {
									trade_goods = iron
									trade_goods = copper
								}
								AND = {
									base_production = 5
									has_production_building_trigger = yes
								}
							}
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4974 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.302 days = 1825
				}
			}
		}
	}

	option = { #Masterforge Upgrade
		name = flavor_beiklings.300.b
		ai_chance = { factor = 0 }

		goto = 4974

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 2
					}
				}
				4974 = { #Yinsheng
					has_province_modifier = the_masterforge
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_masterforge_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_masterforge_upgrade.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 2000
						4974 = {
							AND = {
								owned_by = ROOT
								base_production = 12
								has_building = weapons
							}
						}
						beikling_homeland_provinces = {
							type = all
							OR = {
								NOT = {
									trade_goods = iron
									trade_goods = copper
								}
								AND = {
									base_production = 8
									has_building = weapons
								}
							}
						}
						trading_bonus = {
							trade_goods = iron
							value = yes
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4974 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.303 days = 1825
				}
			}
		}
	}

	option = { #Dark Temple Rebuild
		name = flavor_beiklings.300.c
		ai_chance = { factor = 0 }

		goto = 4952 #Chatzin

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 1
					}
				}
				4952 = { #Chatzin
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_dark_temple
						has_province_modifier = the_great_sheng_shan
						has_province_modifier = the_great_sheng_shan_no_chi
						has_province_modifier = the_dark_temple_upgrade
						has_province_modifier = the_great_sheng_shan_upgrade
						has_province_modifier = the_great_sheng_shan_no_chi_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_the_dark_temple_build.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 500
						4952 = { #Chatzin
							owned_by = ROOT
							base_manpower = 8
							has_tax_building_trigger = yes
							has_manpower_building_trigger = yes
						}
						4826 = { #Bianfang
							has_tax_building_trigger = yes
							has_fort_building_trigger = yes
							has_building = ramparts
						}
						if = {
							limit = {
								OR = {
									religion = devouring_path
									religion = accretive_path
									religion = transmutative_path
								}
							}
							num_of_aspects = 2
						}
						else = {
							religious_unity = 0.6
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4952 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.304 days = 1825
				}
			}
		}
	}


	option = { #Dark Temple Upgrade
		name = flavor_beiklings.300.e
		ai_chance = { factor = 0 }

		goto = 4952

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 2
					}
				}
				4952 = { 
					OR = {
						has_province_modifier = the_dark_temple
						has_province_modifier = the_great_sheng_shan
						has_province_modifier = the_great_sheng_shan_no_chi
					}
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_dark_temple_upgrade
						has_province_modifier = the_great_sheng_shan_upgrade
						has_province_modifier = the_great_sheng_shan_no_chi_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_the_dark_temple_upgrade.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 2000
						4952 = {
							owned_by = ROOT
							base_manpower = 12
							has_building = mills
							has_building = training_fields
						}
						4951 = { has_province_flag = corrupted_wards }
						4839 = { has_province_flag = corrupted_wards }
						4859 = { has_province_flag = corrupted_wards }
						4949 = { has_province_flag = corrupted_wards }
						4930 = { has_province_flag = corrupted_wards }
						4871 = { has_province_flag = corrupted_wards }
						4979 = { has_province_flag = corrupted_wards }
						4925 = { has_province_flag = corrupted_wards }
						4826 = {
							owned_by = ROOT
							OR = {
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
							}
						}
						if = {
							limit = {
								OR = {
									religion = devouring_path
									religion = accretive_path
									religion = transmutative_path
								}
							}
							num_of_aspects = 2
						}
						else = {
							religious_unity = 0.8
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4952 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.305 days = 1825
				}
			}
		}
	}

	option = { #The Yan Toll Rebuild
		name = flavor_beiklings.300.f
		ai_chance = { factor = 0 }

		goto = 4842

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 1
					}
				}
				4842 = { 
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_yan_toll
						has_province_modifier = the_yan_toll_upgrade
					}
				}
			}
		}

		custom_tooltip =  beikling_the_yan_toll_build.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 500
						4842 = {
							owned_by = ROOT
							base_tax = 10
							has_trade_building_trigger = yes
							has_courthouse_building_trigger = yes
							province_has_center_of_trade_of_level = 2
						}
						4844 = {
							has_most_province_trade_power = ROOT
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4842 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.306 days = 1825
				}
			}
		}
	}

	option = { #The Yan Toll Upgrade
		name = flavor_beiklings.300.g
		ai_chance = { factor = 0 }

		goto = 4842

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 2
					}
				}
				4842 = { #Jincheng
					has_province_modifier = the_yan_toll
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_yan_toll_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_the_yan_toll_build.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 2000
						advisor = trader
						4842 = {
							owned_by = ROOT
							base_tax = 15
							OR = {
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
							}
							has_building = textile
							province_has_center_of_trade_of_level = 2
						}
						4844 = {
							has_most_province_trade_power = ROOT
						}
						4925 = {
							has_most_province_trade_power = ROOT
						}
						4879 = {
							has_most_province_trade_power = ROOT
						}
						4859 = {
							has_most_province_trade_power = ROOT
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4842 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			if = {
				limit = { religion = devouring_path }
				custom_tooltip = beikling_yantoll_advisor_dead.tt
				kill_advisor = trader
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.307 days = 1825
				}
			}
		}
	}


	option = { #The Northern Bastion
		name = flavor_beiklings.300.h
		ai_chance = { factor = 0 }

		goto = 5415

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 1
					}
				}
				5415 = { #Hogunuug
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_northern_bastion
						has_province_modifier = the_northern_bastion_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_the_northern_bastion_build.tt

		if = {
			limit = {
				NOT = {
					AND = {
						treasury = 500
						has_mil_advisor_2 = yes
						5415 = {
							owned_by = ROOT
							development = 12
							has_fort_building_trigger = yes
							has_manpower_building_trigger = yes
						}
						yunghuun_area = {
							type = ALL
							owned_by = ROOT
						}
						choogiaza_area = {
							type = ALL
							owned_by = ROOT
						}
						kheizavho_area = {
							type = ALL
							owned_by = ROOT
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			5415 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.308 days = 1825
				}
			}
		}
	}

	option = { #The Northern Bastion Upgrade
		name = flavor_beiklings.300.i
		ai_chance = { factor = 0 }

		goto = 5415

		trigger = {
			hidden_trigger = {
				4844 = { 
					owned_by = ROOT 
					has_great_project = {
						type = the_red_citadel
						tier = 2
					}
				}
				5415 = { #Hogunuug
					has_province_modifier = the_northern_bastion
					NOT = {
						has_province_modifier = beikling_work_in_progress
						has_province_modifier = the_northern_bastion_upgrade
					}
				}
			}
		}

		custom_tooltip = beikling_the_northern_bastion_upgrade.tt

		if = {
			limit = {
				NOT = {
					AND = {
						5415 = { #Hogunuug
							has_province_modifier = the_northern_bastion
							NOT = {
								has_province_modifier = beikling_work_in_progress
								has_province_modifier = the_northern_bastion_upgrade
							}
						}
						treasury = 2000
						has_mil_advisor_4 = yes
						5415 = {
							owned_by = ROOT
							development = 24
							OR = {
								has_building = fort_16th
								has_building = fort_17th
								has_building = fort_18th
							}
							has_building = training_fields
						}
						yunghuun_area = {
							type = ALL
							owned_by = ROOT
							development = 12
						}
						choogiaza_area = {
							type = ALL
							owned_by = ROOT
							development = 12
						}
						kheizavho_area = {
							type = ALL
							owned_by = ROOT
							development = 12
						}
					}
				}
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.301
				}
			}
		}
		else = {
			4842 = {
				add_province_modifier = {
					name = beikling_work_in_progress
					duration = 1825
				}
			}
			if = {
				limit = { religion = devouring_path }
				custom_tooltip = beikling_yantoll_advisor_dead.tt
				kill_advisor = trader
			}
			hidden_effect = {
				country_event = {
					id = flavor_beiklings.309 days = 1825
				}
			}
		}
	}
}

country_event = { #Menu Reseter
	id = flavor_beiklings.301
	title = flavor_beiklings.301.t
	desc = flavor_beiklings.301.d
	picture = MIRACLE_MONK_eventPicture
	is_triggered_only = yes
	trigger = {}
	hidden = yes

	option = {
		name = flavor_beiklings.301.a
		country_event = {
			id = flavor_beiklings.300
		}
	}
}

country_event = { #The Masterforge Build Event
	id = flavor_beiklings.302
	title = flavor_beiklings.302.t
	desc = flavor_beiklings.302.d
	picture = TRADE_GOODS_METALS_AND_MINING_EQUIPENT_eventPicture
	is_triggered_only = yes
	trigger = { owns = 4974 }

	option = {
		name = flavor_beiklings.302.a
		goto = 4974

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}
		4974 = { #Yinsheng
			custom_tooltip = beikling_masterforge_rebuilded.tt
			hidden_effect = {
				remove_province_modifier = the_masterforge_unlit
				add_province_modifier = {
					name = the_masterforge
					duration = -1
				}
			}
		}
		custom_tooltip = beikling_metalurgic_revival.tt
		hidden_effect = {
			beikling_homeland_provinces = {
				limit = {
					OR = {
						trade_goods = iron
						trade_goods = copper
					}
					NOT = { province_id = 4974 }
					NOT = { has_province_modifier = metalurgic_revival }
				}
				add_province_modifier = {
					name = metalurgic_revival
					duration = -1
				}
			}
		}
		if = {
			limit = { primary_culture = beikling }
			4974 = { #Yinsheng
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}
			}
		}
	}
}

country_event = { #The Masterforge Upgrade Event
	id = flavor_beiklings.303
	title = flavor_beiklings.303.t
	desc = flavor_beiklings.303.d
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	trigger = { owns = 4974 }

	option = {
		name = flavor_beiklings.303.a
		goto = 4974

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}
		4974 = {
			custom_tooltip = beikling_masterforge_upgraded.tt
			hidden_effect = {
				remove_province_modifier = the_masterforge
				add_province_modifier = {
					name = the_masterforge_upgrade
					duration = -1
				}
			}
		}
		custom_tooltip = beikling_pinnacle_of_metallurgy.tt
		hidden_effect = {
			beikling_homeland_provinces = {
				limit = {
					OR = {
						trade_goods = iron
						trade_goods = copper
					}
					NOT = { province_id = 4974 }
					NOT = { has_province_modifier = pinnacle_of_metallurgy }
				}
				remove_province_modifier = metalurgic_revival
				add_province_modifier = {
					name = pinnacle_of_metallurgy
					duration = -1
				}
			}
		}
		custom_tooltip = beikling_better_forging.tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					NOT = { has_province_modifier = beikling_better_forging }
					culture = beikling
					has_building = weapons
				}
				add_province_modifier = {
					name = beikling_better_forging
					duration = -1
				}
			}
		}
		add_country_modifier = {
			name = beiklings_new_metal_standards
			duration = 3650
		}
	}
}

country_event = { #The Dark Temple Rebuild
	id = flavor_beiklings.304
	title = flavor_beiklings.304.t
	desc = {
		trigger = { religion = devouring_path }
		desc = flavor_beiklings.304.da
	}
	desc = {
		trigger = { NOT = { religion = devouring_path } }
		desc = flavor_beiklings.304.db
	}
	picture = EXPLORERS_eventPicture
	is_triggered_only = yes
	trigger = { owns = 4952 }

	option = {
		name = flavor_beiklings.304.a
		goto = 4952

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}
		4952 = { #Chatzin
			if = {
				limit = { owner = { religion = devouring_path } }
				custom_tooltip = beikling_darktemple_evil_build.tt
				hidden_effect = {
					remove_province_modifier = the_empty_visage
					add_province_modifier = {
						name = the_dark_temple
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = beikling_darktemple_noevil_build.tt
				if = {
					limit = {
						owner = {
							OR = {
								religion = accretive_path
								religion = transmutative_path
							}
						}
					}
					hidden_effect = {
						remove_province_modifier = the_empty_visage
						add_province_modifier = {
							name = the_great_sheng_shan
							duration = -1
						}
					}					
				}
				else = {
					hidden_effect = {
						remove_province_modifier = the_empty_visage
						add_province_modifier = {
							name = the_great_sheng_shan_no_chi
							duration = -1
						}
					}						
				}
			}
		}
		if = {
			limit = { primary_culture = beikling }
			4952 = { #Chatzin
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}		
			}
			4826 = { #Bianfang
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}
			}
		}
	}
}

country_event = { #The Dark Temple Upgrade
	id = flavor_beiklings.305
	title = flavor_beiklings.305.t
	desc = {
		trigger = { religion = devouring_path }
		desc = flavor_beiklings.305.da
	}
	desc = {
		trigger = { NOT = { religion = devouring_path } }
		desc = flavor_beiklings.305.db
	}
	picture = LOOMING_DEATH_eventPicture
	is_triggered_only = yes
	trigger = { owns = 4952 }

	option = {
		name = flavor_beiklings.305.a
		goto = 4952

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}
		4952 = { #Chatzin
			if = {
				limit = { owner = { religion = devouring_path } }
				custom_tooltip = beikling_darktemple_evil_build.tt
				hidden_effect = {
					remove_province_modifier = the_dark_temple
					add_province_modifier = {
						name = the_dark_temple_upgrade
						duration = -1
					}
				}
			}
			else = {
				custom_tooltip = beikling_darktemple_noevil_build.tt
				if = {
					limit = {
						owner = {
							OR = {
								religion = accretive_path
								religion = transmutative_path
							}
						}
					}
					hidden_effect = {
						remove_province_modifier = the_great_sheng_shan
						add_province_modifier = {
							name = the_great_sheng_shan_upgrade
							duration = -1
						}
					}					
				}
				else = {
					hidden_effect = {
						remove_province_modifier = the_great_sheng_shan_no_chi
						add_province_modifier = {
							name = the_great_sheng_shan_no_chi_upgrade
							duration = -1
						}
					}						
				}
			}
		}
		if = {
			limit = { religion = devouring_path }
			custom_tooltip = beikling_dark_temple_discount.tt
		}
	}
}

country_event = { #Chi Devolution - Has to be done AFTER applying the Oath otherwise it wont add anything
	id = flavor_beiklings.999
	title = flavor_beiklings.999.t
	desc =  flavor_beiklings.999.d
	picture = MIRACLE_MONK_eventPicture
	is_triggered_only = yes
	trigger = {}
	hidden = yes

	option = {
		name = flavor_beiklings.999.a

		add_church_power = 50
	}
}

country_event = { #The Yan Toll Rebuild
	id = flavor_beiklings.306
	title = flavor_beiklings.306.t
	desc =  flavor_beiklings.306.d
	picture = PORTUGUESE_MERCHANTS_eventPicture
	is_triggered_only = yes
	trigger = { owns = 4842 }

	option = {
		name = flavor_beiklings.306.a
		goto = 4842
	
		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}

		4842 = { #Jincheng
			custom_tooltip = beikling_yantoll_build.tt
			hidden_effect = {
				remove_province_modifier = an_abandoned_toll
				add_province_modifier = {
					name = the_yan_toll
					duration = -1
				}
			}
		}
		custom_tooltip = beikling_yantoll_trade_power.tt
		hidden_effect = {
			4844 = {
				add_trade_modifier = {
					who = ROOT
					duration = 3650
					power = 20
					key = STRANGLING_THE_YAN
				}
			}
			4925 = {
				add_trade_modifier = {
					who = ROOT
					duration = 3650
					power = 20
					key = STRANGLING_THE_YAN
				}
			}
			4879 = {
				add_trade_modifier = {
					who = ROOT
					duration = 3650
					power = 20
					key = STRANGLING_THE_YAN
				}
			}
			4859 = {
				add_trade_modifier = {
					who = ROOT
					duration = 3650
					power = 20
					key = STRANGLING_THE_YAN
				}		
			}
		}

		if = {
			limit = { primary_culture = beikling }
			4842 = { #Jincheng
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}		
			}
			4845 = { #Hunshui
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}
			}
		}
	}
}

country_event = { #The Yan Toll Upgrade
	id = flavor_beiklings.307
	title = flavor_beiklings.307.t
	desc =  flavor_beiklings.307.d
	picture = THE_COVENANT_eventPicture
	is_triggered_only = yes
	trigger = {}

	option = {
		name = flavor_beiklings.307.a
		goto = 4842

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}

		4842 = {
			custom_tooltip = beikling_yantoll_upgrade.tt
			hidden_effect = {
				remove_province_modifier = the_yan_toll
				add_province_modifier = {
					name = the_yan_toll_upgrade
					duration = -1
				}
			}
		}
		
		custom_tooltip = beiklings_yantoll_trade_dominance.tt
		hidden_effect = {
			4844 = { #Bianfang Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}
			}
			4925 = { #Tianlou Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}
			}
			4879 = { #Feiten Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}
			}
			4859 = { #Yanzhong Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}		
			}
			4559 = { #Xianjie Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}		
			}
			4633 = { #Shamakhad Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}		
			}
			4500 = { #Kharunyana Node
				add_trade_modifier = {
					who = ROOT
					duration = -1
					power = 30
					key = STRANGLING_HALESS
				}		
			}
		}
	}
}

country_event = { #The Northern Bastion Build
	id = flavor_beiklings.308
	title = flavor_beiklings.308.t
	desc =  flavor_beiklings.308.d
	picture = FORT_eventPicture
	is_triggered_only = yes
	trigger = { owns = 5415 }

	option = {
		name = flavor_beiklings.308.a
		goto = 5415

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}

		5415 = {
			custom_tooltip = beikling_northernbastion_build.tt
			hidden_effect = {
				remove_province_modifier = legends_of_the_northern_vanguard
				add_province_modifier = {
					name = the_northern_bastion
					duration = -1
				}
			}
		}
		yunghuun_area = {
			limit = { 
				owned_by = ROOT
				NOT = { has_province_modifier = under_the_bastions_watch }
			}
			add_province_modifier = {
				name = under_the_bastions_watch
				duration = -1
			}
		}
		choogiaza_area = {
			limit = { 
				owned_by = ROOT
				NOT = {	has_province_modifier = under_the_bastions_watch }
			}
			add_province_modifier = {
				name = under_the_bastions_watch
				duration = -1
			}
		}
		kheizavho_area = {
			limit = { 
				owned_by = ROOT
				NOT = {	has_province_modifier = under_the_bastions_watch }
				NOT = { province_id = 5415 }
			}
			add_province_modifier = {
				name = under_the_bastions_watch
				duration = -1
			}
		}

		if = {
			limit = { primary_culture = beikling }
			5413 = { #Dakuulgo
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}		
			}
			5410 = { #Goryinaigh
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}
			}
			5416 = { #Shinging
				if = { 
					limit = { NOT = { culture = beikling } }
					change_culture = beikling			
				}
			}
		}
	}
}

country_event = { #The Northern Bastion Upgrade
	id = flavor_beiklings.309
	title = flavor_beiklings.309.t
	desc =  flavor_beiklings.309.d
	picture = HORDE_ON_HORSEBACK_eventPicture
	is_triggered_only = yes
	trigger = { owns = 5415 }

	option = {
		name = flavor_beiklings.309.a
		goto = 5415

		if = {
			limit = { government = monarchy }
			add_legitimacy = 10
		}
		if = {
			limit = { government = theocracy }
			add_devotion = 10
		}
		if = {
			limit = { government = republic }
			add_republican_tradition = 3
		}

		5415 = {
			custom_tooltip = beikling_northernbastion_build.tt
			hidden_effect = {
				remove_province_modifier = the_northern_bastion
				add_province_modifier = {
					name = the_northern_bastion_upgrade
					duration = -1
				}
			}
		}
		yunghuun_area = {
			limit = {
				owned_by = ROOT
				NOT = { has_province_modifier = under_the_bastions_shadow } 
			}
			remove_province_modifier = under_the_bastions_watch
			add_province_modifier = {
				name = under_the_bastions_shadow
				duration = -1
			}
		}
		choogiaza_area = {
			limit = {
				owned_by = ROOT
				NOT = { has_province_modifier = under_the_bastions_shadow } 
			}
			remove_province_modifier = under_the_bastions_watch
			add_province_modifier = {
				name = under_the_bastions_shadow
				duration = -1
			}
		}
		kheizavho_area = {
			limit = {
				owned_by = ROOT
				NOT = { has_province_modifier = under_the_bastions_shadow }
				NOT = { province_id = 5415 }
			}
			remove_province_modifier = under_the_bastions_watch
			add_province_modifier = {
				name = under_the_bastions_shadow
				duration = -1
			}
		}
		custom_tooltip = beiklings_heirs_of_the_vanguards.tt
	}
}

country_event = { #The Red Citadel Upgrade 1
	id = flavor_beiklings.310
	title = flavor_beiklings.310.t
	desc =  flavor_beiklings.310.d
	picture = COURT_eventPicture
	is_triggered_only = yes
	trigger = {}

	option = {
		name = flavor_beiklings.310.a
		goto = 4844

		custom_tooltip = beiklings_the_red_citadel_1.tt

		custom_tooltip = red_citadel_homeland_dev_1.tt
		4844 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}

country_event = { #The Red Citadel Upgrade 2
	id = flavor_beiklings.311
	title = flavor_beiklings.311.t
	desc =  flavor_beiklings.311.d
	picture = UNIVERSITY_eventPicture
	is_triggered_only = yes
	trigger = {}

	option = {
		name = flavor_beiklings.311.a
		goto = 4844

		custom_tooltip = beiklings_the_red_citadel_2.tt

		custom_tooltip = red_citadel_homeland_dev_2.tt

		custom_tooltip = the_red_citadel_random_advisor.tt
		
		hidden_effect = {
			define_advisor_of_random_type = {
				skill = 3
				culture = beikling
				religion = THIS 
				cost_multiplier = 0.25
			}
		}
		4844 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}

country_event = { #The Red Citadel Upgrade 3
	id = flavor_beiklings.312
	title = flavor_beiklings.312.t
	desc =  flavor_beiklings.312.d
	picture = MAGE_MOON_ALTER_eventPicture
	is_triggered_only = yes
	trigger = {}

	option = {
		name = flavor_beiklings.312.a
		goto = 4844

		custom_tooltip = beiklings_the_red_citadel_3.tt

		custom_tooltip = red_citadel_homeland_dev_3.tt

		custom_tooltip = the_red_citadel_extra_dev.tt

		4844 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}