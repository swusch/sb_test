namespace = salla_drennen
country_event = {
	id = salla_drennen.1
	title = salla_drennen.1.t
	desc = salla_drennen.1.d
	picture = THE_HEROINE_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		tag = I28
	}

	option = {
		name = salla_drennen.1.a
		custom_tooltip = I28_narawen_tt
		add_ruler_modifier = {
			name = exceptional_willpower_150
			duration = -1
		}
	}
}

country_event = { #FREE
	id = salla_drennen.2
	title = salla_drennen.2.t
	desc = salla_drennen.2.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.2.a
		vassalize = I27
		vassalize = I29
		vassalize = I26
		custom_tooltip = I28_grove_claims_tt
		hidden_effect = {
			deepwoods_bone_grove = {
				limit = {
					NOT = {
						owner = {
							culture = wood_elf
						}
					}
				}
				add_claim = ROOT
			}
			deepwoods_arrow_grove = {
				limit = {
					NOT = {
						owner = {
							culture = wood_elf
						}
					}
				}
				add_claim = ROOT
			}
			deepwoods_hunter_grove = {
				limit = {
					NOT = {
						owner = {
							culture = wood_elf
						}
					}
				}
				add_claim = ROOT
			}	
		}
	}
}

country_event = { #Your Idol
	id = salla_drennen.3
	title = salla_drennen.3.t
	desc = salla_drennen.3.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.3.a
		define_advisor = {
			type = diplomat
			skill = 2
			cost_multiplier = 0.1
			culture = wood_elf
			religion = fey_court
			female = yes
			name = "Lanhara Ayeth"
		}
		define_advisor = {
			type = army_reformer
			skill = 2
			cost_multiplier = 0.1
			culture = wood_elf
			religion = fey_court
			female = yes
			name = "Alara Cenág"
		}
		inherit = I29
	}
}

country_event = { #my counsin, my sister
	id = salla_drennen.4
	title = salla_drennen.4.t
	desc = salla_drennen.4.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.4.a
		add_country_modifier = {
			name = I28_bells_and_bonds
			duration = 3650 #10
		}
		I29 = {
			add_country_modifier = {
				name = I28_bells_and_bonds
				duration = 3650 #10
			}
		}
	}
}

country_event = { #rotten within
	id = salla_drennen.5
	title = salla_drennen.5.t
	desc = salla_drennen.5.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.5.a
		large_decrease_of_orcish_tolerance_effect = yes
		ai_chance = { factor = 70 }
		custom_tooltip = I28_ash_tt
		hidden_effect = {
			every_owned_province = {
				limit = { culture = green_orc }
				change_religion = fey_court
				change_culture = wood_elf
			}
			I29 = {
				every_owned_province = {
					limit = { culture = green_orc }
					change_religion = fey_court
					change_culture = wood_elf
				}
			}	
		}
	}
	option = {
		name = salla_drennen.5.b
		large_increase_of_orcish_tolerance_effect = yes
		ai_chance = { factor = 30 }
		custom_tooltip = I28_verdure_tt
		hidden_effect = {
			every_owned_province = {
				limit = { culture = green_orc }
				add_nationalism = -10
			}
			I29 = {
				every_owned_province = {
					limit = { culture = green_orc }
					add_nationalism = -10	
				}
			}
		}
	}
}

country_event = {
	id = salla_drennen.6
	title = salla_drennen.6.t
	desc = salla_drennen.6.d
	picture = THE_HEROINE_eventPicture
	is_triggered_only = yes

	option = {
		name = salla_drennen.6.a
		magic_school_level_up = { type = country school = abjuration }
		custom_tooltip = I28_light_reading_tt
		if = {
			limit = {
				NOT = {
					is_monarch_leader = yes
				}
			}
			increase_magic_experience = { amount = 100 }
		}
		hidden_effect = {
			change_variable = { num_times_studied_magic_country = 1 }
			change_variable = { num_times_studied_magic_total = 1 }
		}
	}
}

country_event = {
	id = salla_drennen.7
	title = salla_drennen.7.t
	desc = salla_drennen.7.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.7.a
		give_magical_infrastructure_temp_bypass = yes
	}
}

country_event = { #you're not alone
	id = salla_drennen.8
	title = salla_drennen.8.t
	desc = salla_drennen.8.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.8.a
		custom_tooltip = I28_petition_archfey_unlock_tt
		set_country_flag = I28_petition_archfey_unlock
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						is_monarch_leader = yes
					}
				}
				capital_scope = {
					add_institution_embracement = {
						which = feudalism
						value = 30
					}
				}
			}
		}
	}
}

country_event = { #this is what it sounds like
	id = salla_drennen.9
	title = salla_drennen.9.t
	desc = salla_drennen.9.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.9.a
		custom_tooltip = I28_verdant_vivification_tt
		set_country_flag = I28_project_unlock
		set_country_flag = drennen_project_1_project
		deepwoods_thorn_grove = {
			add_permanent_province_modifier = {
				name = I28_rainbow_rebirth
				duration = -1
			}
		}
		change_variable = {
			which = drennen_project_1_level
			value = 1
		}
	}
}

country_event = { #the second conclave
	id = salla_drennen.10
	title = salla_drennen.10.t
	desc = salla_drennen.10.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.10.a
		country_event = {
			id = salla_drennen.11
		}
	}
}

country_event = { #Golden
	id = salla_drennen.11
	title = salla_drennen.11.t
	desc = salla_drennen.11.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.11.a
		custom_tooltip = I28_sorceress_ceannasai_tt
		hidden_effect = {
			if = {
				limit = {
					is_monarch_leader = no
				}
				add_ruler_modifier = {
					name = I28_sorceress_ceannasai
					duration = -1
				}
			}
			every_known_country = {
				limit = {
					primary_culture = wood_elf
					capital_scope = { superregion = deepwoods_superregion }
					NOT = {
						is_subject_of = ROOT
					}
				}
				set_country_flag = I28_no_inherit
				ROOT = {
					vassalize = PREV
				}
			}
		}
		form_cyranvar = yes #it seems like this should be above the vassalise effect, but for whatever reason when you sequence it that way it creates an issue where not everyone gets vassalised.
	}
}
country_event = { #petition archfey
	id = salla_drennen.12
	title = salla_drennen.12.t
	desc = salla_drennen.12.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes
	
	option = { 
		name = salla_drennen.12.bb
		add_church_power = 50
	}
	option = { #distant dreamer
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_distant_dreamer_tt
				has_country_flag = I28_distant_dreamer_unlock
				NOT = {
					has_country_flag = I28_distant_dreamer_done
				}
			}
		}
		name = salla_drennen.12.a
		country_event = {
			id = salla_drennen.13
		}
	}
	option = { #fey queen
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_fey_queen_tt
				has_institution = feudalism
				NOT = {
					has_country_flag = I28_fey_queen_done
				}
			}
		}
		name = salla_drennen.12.b
		country_event = {
			id = salla_drennen.14
		}
	}
	option = { #lord of beasts
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_lord_of_beasts_tt
				has_country_flag = humiliated_rival
				NOT = {
					has_country_flag = I28_lord_beasts_done
				}
			}
		}
		name = salla_drennen.12.c
		country_event = {
			id = salla_drennen.15
		}
	}
	option = { #lord blossom
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_lord_blossom_tt
				any_owned_province = {
					OR = {
						trade_goods = tropical_wood
						trade_goods = spices
						trade_goods = grain
						trade_goods = livestock
						trade_goods = sugar
						trade_goods = cotton
					}
					num_of_times_improved_by_owner = 2
				}
				NOT = {
					has_country_flag = I28_lord_blossom_done
				}
			}
		}
		name = salla_drennen.12.d
		country_event = {
			id = salla_drennen.16
		}
	}
	option = { #king of darkness
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_king_of_darkness_tt
				calc_true_if = {
					amount = 3
					all_ally = {
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
					all_subject_country = {
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
				}
				NOT = {
					has_country_flag = I28_king_of_darkness_done
				}
			}
		}
		country_event = {
			id = salla_drennen.17
		}
		name = salla_drennen.12.e
	}
	option = { #herald of change
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = I28_herald_of_change_tt
				innovativeness = 4
				NOT = {
					has_country_flag = I28_herald_of_change_done
				}
			}
		}
		name = salla_drennen.12.f
		country_event = {
			id = salla_drennen.18
		}
	}
	option = { #distant dreamer
		trigger = {
			NOT = {
				has_country_flag = I28_distant_dreamer_unlock
			}
			NOT = {
				has_country_flag = I28_distant_dreamer_done
			}
		}
		name = salla_drennen.12.a2
		custom_tooltip = I28_distant_dreamer_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
	option = { #fey queen
		trigger = {
			NOT = {
				has_institution = feudalism
			}
			NOT = {
				has_country_flag = I28_fey_queen_done
			}
		}
		name = salla_drennen.12.b2
		custom_tooltip = I28_fey_queen_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
	option = { #lord of beasts
		trigger = {
			NOT = {
				has_country_flag = humiliated_rival
			}
			NOT = { 
				has_country_flag = I28_lord_beasts_done
			}
		}
		name = salla_drennen.12.c2
		custom_tooltip = I28_lord_of_beasts_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
	option = { #lord blossom
		trigger = {
			NOT = {
				any_owned_province = {
					OR = {
						trade_goods = tropical_wood
						trade_goods = spices
						trade_goods = grain
						trade_goods = livestock
						trade_goods = sugar
						trade_goods = cotton
					}
					num_of_times_improved_by_owner = 2
				}
			}
			NOT = {
				has_country_flag = I28_lord_blossom_done
			}
		}
		name = salla_drennen.12.d2
		custom_tooltip = I28_lord_blossom_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
	option = { #king of darkness
		trigger = {
			NOT = {
				calc_true_if = {
					amount = 3
					all_ally = {
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
					all_subject_country = {
						has_opinion = {
							who = ROOT
							value = 190
						}
					}
				}
			}
			NOT = {
				has_country_flag = I28_king_of_darkness_done
			}
		}
		name = salla_drennen.12.e2
		custom_tooltip = I28_king_of_darkness_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
	option = { #herald of change
		trigger = {
			NOT = {
				innovativeness = 4
			}
			NOT = {
				has_country_flag = I28_herald_of_change_done
			}
		}
		name = salla_drennen.12.f2
		custom_tooltip = I28_herald_of_change_tt
		hidden_effect = {
			country_event = {
				id = salla_drennen.21
			}
		}
	}
}

country_event = { #distant dreamer
	id = salla_drennen.13
	title = salla_drennen.13.t
	desc = salla_drennen.13.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.13.a
		set_country_flag = I28_distant_dreamer_done
		increase_magic_experience = { amount = 200 }
		add_country_modifier = {
			name = I28_dreamer_drawback
			duration = 1825 #5
		}
	}
}

country_event = { #fey queen
	id = salla_drennen.14
	title = salla_drennen.14.t
	desc = salla_drennen.14.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.14.a
		set_country_flag = I28_fey_queen_done
		change_government_reform_progress = 30
		add_country_modifier = {
			name = I28_queen_drawback
			duration = 1825 #5
		}
	}
}

country_event = { #lord of beasts
	id = salla_drennen.15
	title = salla_drennen.15.t
	desc = salla_drennen.15.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.15.a
		set_country_flag = I28_lord_beasts_done
		add_manpower = 5
		add_country_modifier = {
			name = I28_beasts_drawback
			duration = 1825 #5
		}
	}
}

country_event = { #lord blossom
	id = salla_drennen.16
	title = salla_drennen.16.t
	desc = salla_drennen.16.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.16.a
		set_country_flag = I28_lord_blossom_done
		add_years_of_owned_provinces_production_income = {
			years = 2
		}
		add_country_modifier = {
			name = I28_blossom_drawback
			duration = 1825 #5
		}
	}
}

country_event = { #king of darkness
	id = salla_drennen.17
	title = salla_drennen.17.t
	desc = salla_drennen.17.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.17.a
		set_country_flag = I28_king_of_darkness_done
		custom_tooltip = I28_king_of_darkness_ttt
		for = {
			amount = 4
			effect = "
				random_ally = {
					limit = {
						NOT = {
							has_country_flag = I28_targeted
						}
					}
					set_country_flag = I28_targeted
					ROOT = {
						add_dip_power = 50
					}
					add_trust = {
						who = PREV
						value = 10
						mutual = yes
					}
				}
			"
		}
		for = {
			amount = 4
			effect = "
				random_subject_country = {
					limit = {
						NOT = {
							has_country_flag = I28_targeted
						}
					}
					set_country_flag = I28_targeted
					ROOT = {
						add_dip_power = 50
					}
					add_trust = {
						who = PREV
						value = 10
						mutual = yes
					}
				}
			"
		}
		add_country_modifier = {
			name = I28_king_drawback
			duration = 1825 #5
		}
	}
}

country_event = { #herald of change
	id = salla_drennen.18
	title = salla_drennen.18.t
	desc = salla_drennen.18.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.18.a
		set_country_flag = I28_herald_of_change_done
		if = {
			limit = {
				OR = {
					has_institution = renaissance 
					AND = { 
						has_institution = feudalism 
						NOT = { 
							is_institution_enabled = renaissance 
						} 
					} 
				}
				
			}
			change_innovativeness = 5
		}
		else_if = {
			limit = { has_institution = feudalism }
			capital_scope = {
				add_institution_embracement = { which = renaissance value = 30 }
			}
		}
		else = {
			capital_scope = {
				add_institution_embracement = { which = feudalism value = 30 }
			}
		}
		add_country_modifier = {
			name = I28_herald_drawback
			duration = 1825 #5
		}
	}
}

country_event = {
	id = salla_drennen.19
	title = salla_drennen.19.t
	desc = salla_drennen.19.d
	picture = THE_HEROINE_eventPicture
	is_triggered_only = yes

	option = {
		name = salla_drennen.19.a
		custom_tooltip = I28_rainbow_2_tt
	}
}

country_event = { #final project upgrade
	id = salla_drennen.20
	title = salla_drennen.20.t
	desc = salla_drennen.20.d
	picture = THE_HEROINE_eventPicture

	is_triggered_only = yes

	option = {
		name = salla_drennen.20.a
		custom_tooltip = I28_rainbow_3_tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_province_modifier = I28_rainbow_rebirth
				}
				remove_province_modifier = I28_rainbow_rebirth
				add_province_modifier = {
					name = I28_rainbow_rebirth_2
					duration = -1
				}
			}
		}
	}
}

country_event = {
	id = salla_drennen.21
	title = salla_drennen.19.t
	desc = salla_drennen.19.d
	picture = THE_HEROINE_eventPicture
	hidden = yes
	is_triggered_only = yes

	option = {
		name = salla_drennen.19.a
		country_event = {
			id = salla_drennen.12
		}
	}
}

province_event = {
	id = salla_drennen.22
	title = salla_drennen.22.t
	desc = salla_drennen.22.d
	picture = THE_HEROINE_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		superregion = deepwoods_superregion
	}

	option = {
		name = salla_drennen.22.a
		trigger_switch = {
			on_trigger = province_group
			deepwoods_arrow_grove = { deepwoods_arrow_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_bone_grove = { deepwoods_bone_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_lake_grove = { deepwoods_lake_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_mountain_grove = { deepwoods_mountain_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_thorn_grove = { deepwoods_thorn_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_hunter_grove = { deepwoods_hunter_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_river_grove = { deepwoods_river_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_flower_grove = { deepwoods_flower_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
			deepwoods_shadow_grove = { deepwoods_shadow_grove = { add_province_modifier = { name = I28_rainbow_rebirth duration = -1 } } }
		}
	}
}

province_event = {
	id = salla_drennen.23
	title = salla_drennen.22.t
	desc = salla_drennen.22.d
	picture = THE_HEROINE_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		superregion = deepwoods_superregion
	}

	option = {
		name = salla_drennen.22.a
		trigger_switch = {
			on_trigger = province_group
			deepwoods_arrow_grove = { deepwoods_arrow_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_bone_grove = { deepwoods_bone_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_lake_grove = { deepwoods_lake_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_mountain_grove = { deepwoods_mountain_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_thorn_grove = { deepwoods_thorn_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_hunter_grove = { deepwoods_hunter_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_river_grove = { deepwoods_river_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_flower_grove = { deepwoods_flower_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
			deepwoods_shadow_grove = { deepwoods_shadow_grove = { add_province_modifier = { name = I28_rainbow_rebirth_2 duration = -1 } } }
		}
	}
}